<!DOCTYPE html>
<html lang="en">
    <head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<link rel="apple-touch-icon" sizes="180x180" href="https://www.cyanilux.com/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.cyanilux.com/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.cyanilux.com/favicon-16x16.png">
<link rel="manifest" href="https://www.cyanilux.com/site.webmanifest">
<meta name="msapplication-TileColor" content="#00aba9">
<meta name="theme-color" content="#ffffff">
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://www.cyanilux.com/index.xml"> 
<link rel="stylesheet" type="text/css" href="https://www.cyanilux.com/css/style.css?v=9 ">


 


<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage" : "https://www.cyanilux.com/tutorials/intro-to-shader-graph/",
  "headline": "Intro to Shader Graph",
  "name": "Intro to Shader Graph",
  "description": "A detailed introduction on how to use Unity Shader Graph! Graph setup, Data types, Understanding Previews, Properties, Keywords, Sub Graphs and more!",
  "datePublished": "2021-03-05",
  "dateModified": "2025-03-05",
  "author": {
	"@type": "Person",
	"name": "Cyanilux",
	"url": "https://www.cyanilux.com"
  },
  "image": {
    "@type": "ImageObject",
    "@id": "https://www.cyanilux.com/tutorials/intro-to-shader-graph/Preview_hu6158d2a19df6cd50af6e8f16e2aae2eb_10301_300x0_resize_box_3.png",
    "url": "https://www.cyanilux.com/tutorials/intro-to-shader-graph/Preview_hu6158d2a19df6cd50af6e8f16e2aae2eb_10301_300x0_resize_box_3.png",
    "height": "192",
    "width": "300"
  },
  "url": "https://www.cyanilux.com/tutorials/intro-to-shader-graph/",
  "inLanguage": "en-gb",
  "wordCount": "17237",
  "isPartOf": {
    "@type" : "Blog",
    "@id": "https://www.cyanilux.com",
    "name": "Cyanilux Shader Tutorials - Game Dev Blog & Tutorials"
  },
  "keywords": [
    "Unity", 
    "Tutorial", 
    "Shader Graph"
  ]
}
</script>

<meta name="twitter:card" content="summary_large_image"/>
	<meta name="twitter:image" content="https://www.cyanilux.com/tutorials/intro-to-shader-graph/Preview.png"/>
<meta name="twitter:title" content="Intro to Shader Graph"/>
<meta name="twitter:description" content="A detailed introduction on how to use Unity Shader Graph! Graph setup, Data types, Understanding Previews, Properties, Keywords, Sub Graphs and more!"/>

<meta property="og:title" content="Intro to Shader Graph" />
<meta property="og:description" content="A detailed introduction on how to use Unity Shader Graph! Graph setup, Data types, Understanding Previews, Properties, Keywords, Sub Graphs and more!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.cyanilux.com/tutorials/intro-to-shader-graph/" />

	
        
        
            <meta name="og:image" content="https://www.cyanilux.com/tutorials/intro-to-shader-graph/Preview.png"/>
        
    
<meta property="article:published_time" content="2021-03-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2025-03-05T00:00:00+00:00" />
<title>Intro to Shader Graph | Cyanilux Shader Tutorials</title>
<meta name="description" content="A detailed introduction on how to use Unity Shader Graph! Graph setup, Data types, Understanding Previews, Properties, Keywords, Sub Graphs and more!. Shader Graph | Unity Shader Tutorials, @Cyanilux" />
<link rel="canonical" href="https://www.cyanilux.com/tutorials/intro-to-shader-graph/" />
<script>
	var webStorageSupported = (typeof(Storage) !== undefined);
	
	function getCookie(cname) {
		var name = cname + "=";
		var decodedCookie = decodeURIComponent(document.cookie);
		var ca = decodedCookie.split(';');
		for(var i = 0; i <ca.length; i++) {
			var c = ca[i];
			while (c.charAt(0) == ' ') {
				c = c.substring(1);
			}
			if (c.indexOf(name) == 0) {
				return c.substring(name.length, c.length);
			}
		}
		return "";
	}
	
	var cookie;
	if (webStorageSupported){
		cookie = localStorage.getItem("cookiesAccepted");
	}else{
		cookie = getCookie("cookiesAccepted");
	}
	
	var showBanner = false;
	var cookiesAccepted = false;
	if (cookie == "true"){
		cookiesAccepted = true;
		showBanner = false;
	}else if (cookie === null || cookie == ""){
		showBanner = true;
	}
</script>



<script>
	if (cookiesAccepted){
		
		document.write("<script async src=\"https://www.googletagmanager.com/gtag/js?id=G-11MK1LK6C3\"><\/script>" +
		"<script>\n"+
		"window.dataLayer = window.dataLayer || [];\n" +
		"function gtag(){dataLayer.push(arguments);}\n" +
		"gtag('js', new Date());\n" +
		"gtag('config', 'G-11MK1LK6C3', { 'anonymize_ip': true });\n" + 
		"<\/script>");
	}
</script>


</head>
    <body>
        
<div class="header">
	<div class="logo-header-div"> 
	<a class="link-plain" href="https://www.cyanilux.com">
		<img class="logo" alt="Logo" width="128" height="128" src="https://www.cyanilux.com/logo-small.png"/>
	</a>
	<div class="logo-text-div">
		<h1 class="title-no-margin">
			<a class="logo-text" href="https://www.cyanilux.com">Cyanilux</a>
		</h1>
		<b class="logo-subtext">Game Dev Blog &amp; Tutorials</b>
	</div>
	</div>
	
	<div class="nav-links-div">
	<nav id="nav-links" class="nav-links">
		<ul>
			
			<li><a class="nav-link" href="https://bsky.app/profile/cyanilux.bsky.social">
			<img width="35" height="35" alt="Bluesky" src="https://www.cyanilux.com/logo-bsky.png" ></img>
			</a>
			</li>
			
			<li><a class="nav-link" href="https://mastodon.gamedev.place/@Cyanilux">
			<img width="35" height="35" alt="Mastodon" src="https://www.cyanilux.com/logo-mastodon.png" ></img>
			</a>
			</li>
			
			<li><a class="nav-link" href="http://discord.gg/2V93q9w">
			<img width="35" height="35" alt="Discord" src="https://www.cyanilux.com/logo-discord.png" ></img>
			</a>
			</li>
			
			<li><a class="nav-link" href="https://github.com/Cyanilux">
			<img width="35" height="35" alt="Github" src="https://www.cyanilux.com/logo-github.png" ></img>
			</a>
			</li>
			
			<li><a class="nav-link" href="https://ko-fi.com/cyanilux">
			<img width="35" height="35" alt="Ko-Fi" src="https://www.cyanilux.com/logo-kofi.png" ></img>
			</a>
			</li>
			
		</ul>
	</nav>
	</div>
	
	<nav id="nav" class="nav">
	<ul>
		
		<li><b><a class="nav-link" href="https://www.cyanilux.com/contents/">
		Contents
		</a></b>
		</li>
		
		<li><b><a class="nav-link" href="https://www.cyanilux.com/recent/">
		Recent Posts
		</a></b>
		</li>
		
		<li><b><a class="nav-link" href="https://www.cyanilux.com/resources/">
		Resources
		</a></b>
		</li>
		
		<li><b><a class="nav-link" href="https://www.cyanilux.com/faq/">
		FAQ
		</a></b>
		</li>
		
	</ul>
	</nav>
</div>
        <div class="content">
        

<h1>Intro to Shader Graph</h1>
<div class="post-metadata">


<div class="tag" style="background-color:#505050;">
	<a href="https://www.cyanilux.com/tutorials/posts/" style="text-decoration: none; color:#eeeeee;">
	Posts
	</a>
</div>




	<div class="tag" style="background-color:#101010;">
	
	<a href="https://www.cyanilux.com/tags/shader-graph" style="text-decoration: none; color:#eeeeee;">
	Shader Graph
	</a>
	</div>




<div style="width:10px"></div>
<time datetime="2021-03-05">&#128337 5 Mar 2021</time>


<div style="width:5px"></div>
<time datetime="2025-03-05"> (updated 5 Mar 2025)</time>

</div>
<p>Hey! This post is a detailed introduction to using <strong>Shader Graph</strong> - a node based shader editor for Unity that is provided for the <strong>Scriptable Render Pipelines</strong> (SRPs), including the <strong>Universal Render Pipeline</strong> (URP) and <strong>High Definition Render Pipeline</strong> (HDRP). The post goes over how to use the tool and it&rsquo;s features, not necessarily how to create shaders using it - I have other <a href="https://www.cyanilux.com/contents/#tutorial-breakdowns">tutorial breakdowns</a> that go over creating specific shader effects if you&rsquo;re interested in that.</p>
<p>Shader Graph is also now supported in the <strong>Built-in Pipeline as of Unity 2021.2+</strong>, though may be limited in some features. It is not supported for previous versions.</p>
<p>Also note, you may also see the “Lightweight Render Pipeline (LWRP)” mentioned online, which was renamed to Universal RP during development. You may still find LWRP listed in the package manager but the newer versions (e.g. v7 onwards) should be identical to URP. If you are installing the package manually, I&rsquo;d suggest just using the Universal RP one instead.</p>
<p>If you aren&rsquo;t familiar with what <strong>shaders</strong> and <strong>materials</strong> are, I&rsquo;d recommend looking at my <a href="https://www.cyanilux.com/tutorials/intro-to-the-shader-pipeline">Intro to the Shader Pipeline</a> post before reading this one.</p>
<p>(Also note, any keyboard shortcuts will be based on Windows)</p>
<h3 id="sections-">Sections :</h3>
<p class="">
<!-- bit of a hack to make the spacing better for list -->
<font style="line-height:1.5">
</p>
<ul>
<li><strong><a href="#install">Installing Shader Graph / URP / HDRP</a></strong></li>
<li><strong><a href="#graph-types">Graph Types</a></strong></li>
<li><strong><a href="#graph-inspector">Graph Inspector</a></strong></li>
<li><strong><a href="#master-stack">Master Stack</a></strong>
<ul>
<li><a href="#shader-stages">Vertex vs Fragment</a></li>
</ul>
</li>
<li><strong><a href="#save-graph">Save Graph</a></strong></li>
<li><strong><a href="#nodes">Nodes</a></strong>
<ul>
<li><a href="#ports">Ports &amp; Connections</a></li>
<li><a href="#redirect">Redirect / Elbow</a></li>
<li><a href="#selection">Selecting Nodes</a></li>
<li><a href="#previews">Previews</a></li>
</ul>
</li>
<li><strong><a href="#data-types">Data Types</a></strong>
<ul>
<li><a href="#float-vector">Float &amp; Vector</a>
<ul>
<li><a href="#truncate">Truncate</a>, <a href="#promote">Promote</a></li>
</ul>
</li>
<li><a href="#dynamic-ports">Dynamic Ports</a></li>
<li><a href="#matrix">Matrix</a></li>
<li><a href="#boolean">Boolean</a></li>
<li><a href="#textures">Textures</a>
<ul>
<li><a href="#filter-modes">Filter Modes</a>, <a href="#mip-maps">Mip Maps</a>, <a href="#wrap-modes">Wrap Modes</a>, <a href="#samplerstate">SamplerState</a>, <a href="#texture2D">Texture2D</a>, <a href="#texel-size">Texel Size &amp; Texture Size</a>, <a href="#texture3D">Texture3D</a>, <a href="#texture2DArray">Texture2DArray</a>, <a href="#cubemap">Cubemap</a></li>
</ul>
</li>
<li><a href="#gradient">Gradient</a></li>
</ul>
</li>
<li><strong><a href="#coordinate-spaces">Coordinate Spaces</a></strong></li>
<li><strong><a href="#understanding-previews">Understanding Previews</a></strong>
<ul>
<li><a href="#preview-float">Float/Vector1</a></li>
<li><a href="#preview-vector">Vector</a></li>
<li><a href="#preview-uv">UV</a></li>
<li><a href="#preview-position">Position</a></li>
</ul>
</li>
<li><strong><a href="#main-preview">Main Preview</a></strong></li>
<li><strong><a href="#blackboard">Blackboard</a></strong>
<ul>
<li><a href="#path">Path</a></li>
<li><a href="#properties">Properties</a>
<ul>
<li><a href="#property-reference">Reference</a>, <a href="#property-exposed">Exposed</a>, <a href="#property-default">Default</a>, <a href="#property-modes">Modes</a>, <a href="#property-precision">Precision</a>, <a href="#setting-properties">Setting Properties from C#</a></li>
</ul>
</li>
<li><a href="#keywords">Keywords &amp; Shader Variants</a>
<ul>
<li><a href="#keyword-scope">Scope</a>, <a href="#keyword-exposed">Exposed</a>, <a href="#keyword-definition">Definition</a>, <a href="#setting-keywords">Setting Keywords from C#</a></li>
</ul>
</li>
<li><a href="#categories">Categories</a></li>
</ul>
</li>
<li><strong><a href="#groups">Grouping Nodes</a></strong></li>
<li><strong><a href="#sticky-notes">Sticky Notes</a></strong></li>
<li><strong><a href="#shortcuts">Shortcut Keys</a></strong></li>
<li><strong><a href="#sub-graphs">Sub Graphs</a></strong>
<ul>
<li><a href="#sub-graph-outputs">Outputs</a></li>
<li><a href="#sub-graph-inputs">Inputs</a></li>
<li><a href="#sub-graph-branch">Branch On Input Connection</a></li>
</ul>
</li>
<li><strong><a href="#fragment-only-nodes">Fragment-Only Nodes</a></strong></li>
<li><strong><a href="#advanced">Advanced</a></strong>
<ul>
<li><a href="#custom-interpolators">Custom Interpolators</a>
<ul>
<li><a href="#custom-interpolators-example-1">Example 1 - Undistorted Position</a></li>
<li><a href="#custom-interpolators-example-2">Example 2 - Vertex Based Distortion</a></li>
</ul>
</li>
<li><a href="#custom-functions">Custom Functions</a>
<ul>
<li><a href="#ifdef-shadergraph-preview">Calling ShaderLibrary Functions</a></li>
<li><a href="#better-texture-data-types">Sampling Textures</a></li>
<li><a href="#arrays">Arrays &amp; Loops</a></li>
<li><a href="#shader-pass-defines">Shader Pass Defines</a></li>
</ul>
</li>
<li><a href="#generated-shader-code">Viewing/Editing Generated Shader Code</a></li>
</ul>
</li>
</ul>

<p class="">
</font>
</p>
<hr>
<h2 id="install">Installing Shader Graph</h2>
<p>Shader Graph is a node based shader editor that is mostly intended for the Scriptable Render Pipelines. But it does also have some Built-in RP support now for Unity 2021.2+. If in that version or higher, you can install the Shader Graph package via the <strong>Package Manager</strong> (accessed via <strong>Window</strong> on the top menu).</p>
<p>For the Universal RP and High Definition RP, Shader Graph is already included in their packages so <strong>will automatically be installed alongside them</strong>. Select one of the URP/HDRP <strong>templates when starting a new project</strong> or install the URP/HDRP package manually via the <strong>Package Manager</strong>.</p>
<p>If installed manually, this will also require following some additional setup - such as creating and assigning a Pipeline Asset under the <strong>Project Settings → Graphics</strong> tab. The asset can also be overriden per Quality setting. You&rsquo;ll also need to convert materials to use the shaders from the appropiate pipeline, this can be done automatically from the <strong>Edit → Render Pipeline</strong> menu but will only work for the Standard built-in shaders. Any custom shaders cannot be upgraded automatically and will require rewriting. For additional setup instructions see the &ldquo;Getting Started&rdquo; tabs in the documentation :</p>
<ul>
<li><a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@latest">Universal Render Pipeline Docs</a></li>
<li><a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@latest">High Definition Render Pipeline Docs</a></li>
</ul>
<p>I would mainly recommend that beginners start with URP as it is much simpler than HDRP (and most of my tutorials are written for URP). Some tutorials may also work in HDRP but may require some additional tweaks (due to differences like <a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@10.2/manual/Camera-Relative-Rendering.html">Camera-Relative rendering</a> and different master nodes/stack).</p>
<p>There is also documentation for Shader Graph. The <strong>Node Library</strong> in particular can be very useful for learning what each node does, but it can also be accessed in Shader Graph by right-clicking a node and selecting &ldquo;Open Documentation&rdquo;.</p>
<ul>
<li><a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@latest">Shader Graph Docs</a></li>
</ul>
<p>Also be aware you can view your current <strong>Shader Graph version</strong> in the <strong>Package Manager</strong> window (accessed via <strong>Window</strong> on the top menu). You might also be able to update the version here though some aren&rsquo;t available unless you also update Unity itself. (e.g. v10 is only available for 2020.2 onwards)</p>
<hr>
<h2 id="graph-types">Graph Types</h2>
<p>To create a Shader Graph Asset, right-click somewhere in your <strong>Assets</strong> in the <strong>Project</strong> window then select <strong>Create → Shader Graph</strong>.</p>
<p>Older versions may have them listed under <strong>Shader</strong> heading but that also includes writing shaders using code (CG/HLSL) such as the Surface Shader and Unlit Shader options. Those templates are intended for the Built-in Render Pipeline and may not function in other pipelines.</p>
<div class="img-center">
<a href="CreateShaderGraph.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="220" alt="Example : Create -&gt; Shader -&gt; Universal Render Pipeline -&gt; Unlit Shader Graph" src="CreateShaderGraph.png" />
</a>
<p class="img-text"></p>
</div>
<p>In v10+ (Unity 2020.2+) there is three graphs listed :</p>
<ul>
<li><strong>Blank Shader Graph</strong> : A shader graph with no predefined settings. All other graphs (except for Sub Graphs) are a version of this graph with settings already adjusted. It&rsquo;s possible to switch between them at any time through the use of the <strong>Graph Settings</strong> as discussed in the next section. While a Material can be created using a Blank Shader Graph, the resulting shader will be the magenta error shader unless configured into one of the other types. Using one of the other templates can provide quicker setup.</li>
<li><strong>Sub Graph</strong> : A special type of graph that can be used as a node in other graphs. Useful for creating functions that you will want to reuse many times and for organising large graphs. Sub Graphs can also be nested in other Sub Graphs. A later section will go into these in more detail.</li>
<li><strong>VFX Shader Graph</strong> : For creating a shader that is compatible with the <a href="https://docs.unity3d.com/Packages/com.unity.visualeffectgraph@latest">Visual Effect Graph</a>, used for creating particle effects. It cannot be applied to regular GameObjects/Renderers, only in the VFX Graph Output Particle blocks. (This graph type is deprecated in newer versions, in favour of checkboxes under the Graph Settings of other graph types to make them support VFX Graph without needing the VFX Graph &ldquo;target&rdquo;)</li>
</ul>
<p>If URP is installed, a &ldquo;Universal Render Pipeline&rdquo; heading is shown with the following :</p>
<ul>
<li><strong>Lit Shader Graph</strong> : Known as the &ldquo;PBR Graph&rdquo; prior to v10. Used for creating a graph that handles lighting for 3D mesh objects, using a <strong>Physically Based Rendering</strong> lighting model, similar to the URP/Lit Shader (or the built-in RP&rsquo;s Standard shader / surface shaders)</li>
<li><strong>Unlit Shader Graph</strong> : Always fully lit, is not affected by lights &amp; shadows. Intended for use on 3D objects.</li>
<li><strong>Sprite Lit Shader Graph</strong> : For use with Sprites with <a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.universal@11.0/manual/2d-index.html">URP&rsquo;s 2D Renderer &amp; 2D lighting system</a></li>
<li><strong>Sprite Unlit Shader Graph</strong> : For use with Sprites. Always fully lit, is not affected by lights &amp; shadows.</li>
<li><strong>Fullscreen Shader Graph</strong> (Unity 2022.2+) : For use with the Fullscreen Pass Renderer Feature, for creating custom post-processing effects - see <a href="https://docs.unity3d.com/6000.0/Documentation/Manual/urp/post-processing/post-processing-custom-effect-low-code.html">docs example</a></li>
<li><a href="https://docs.unity3d.com/6000.0/Documentation/Manual/urp/canvas-shader.html"><strong>Canvas Graph</strong></a> (Unity 2023.2+ &amp; 6000+) : For use with UI (e.g. Image, Raw Image components)</li>
</ul>
<p>For HDRP graph types, <a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@17.0/manual/shader-graph-materials-reference.html">see docs</a>.</p>
<hr>
<h2 id="graph-inspector">Graph Inspector</h2>
<p>In v10+, the <strong>Graph Inspector</strong> window was added, which can be toggled using the button in the top right of the graph. It has two tabs, <strong>Node Settings</strong> and <strong>Graph Settings</strong>.</p>
<div class="img-center">
<a href="GraphInspector.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="331" height="292" alt="(Image)" src="GraphInspector.png" />
</a>
<p class="img-text"></p>
</div>
<p>The <strong>Graph Settings</strong> tab is important to set up the graph correctly if you&rsquo;ve selected the <strong>Blank Shader Graph</strong> or want to switch to a different graph type. We need to select an <strong>Active Target</strong> (Universal, HDRP or Visual Effect, depending on which is installed in the project). It&rsquo;s also possible to add multiple active targets to the list, if you need it to be compiled for more than one that is.</p>
<p>Once a target is selected, more settings are added below the list. I&rsquo;ll be going through the <strong>Universal</strong> ones below but HDRP has some similar ones too (listed on their graph type / master node pages, as linked in the docs above).</p>
<div class="img-center">
<a href="GraphSettingsUniversal.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="647" height="224" alt="(Image)" src="GraphSettingsUniversal.png" />
</a>
<p class="img-text"></p>
</div>
<p>Prior to v10, these settings can instead be found on the <b class="node">Master</b> node. While hovering over it, a small cog/gear icon appears in the top right of the node which shows the settings when clicked.</p>
<p>Common settings for URP include :</p>
<ul>
<li><strong>Material</strong> : Selects the graph type. Can be <strong>Unlit</strong>, <strong>Lit</strong>, or <strong>Sprite Unlit/Lit</strong>.
<ul>
<li>As an example, if <strong>Lit</strong> is selected Shader Graph will automatically handle lighting calculations based on <strong>Physically Based Rendering</strong> (PBR) lighting models and add more inputs to the <strong>Master Stack</strong> such as <strong>Metallic</strong>, <strong>Smoothness</strong> and Tangent space <strong>Normal</strong>. This will be explained in more detail in the section below.</li>
</ul>
</li>
<li><strong>Surface</strong> : Can be <strong>Opaque</strong> or <strong>Transparent</strong></li>
<li><strong>Blend</strong> : If <strong>Transparent</strong> is selected, a <strong>Blend</strong> type option will appear which determines how the transparency is handled. 
<button  type="button" class="foldout_button" onclick="
    this.classList.toggle('active');
    var content = this.nextElementSibling;
    if (content.style.display === 'block') {
      content.style.display = 'none';
      this.innerHTML = '<b>⯈ Details about each Blend option</b>';
    } else {
      content.style.display = 'block';
      this.innerHTML = '<b>⯆ Details about each Blend option</b>';

    }
"><b>⯈ Details about each Blend option</b></button>
<div class="foldout">
<p>The options here are :</p>
<ul>
<li><strong>Alpha</strong> : Regular alpha blending. Is equivalent to <code>Blend SrcAlpha OneMinusSrcAlpha, One OneMinusSrcAlpha</code> in ShaderLab (Shader code), where the first term (<code>SrcAlpha</code>, referring to the <strong>Alpha</strong> port of the <strong>Master Stack</strong>) is multiplied by the <strong>Base Color</strong> output and the second term (<code>OneMinusSrcAlpha</code>) is multiplied by the colour already on screen. These two are added together which is then written to the screen. (The other two terms after the comma are used for the alpha channel only)
<ul>
<li>In this case, the calculation is identical to what a <b class="node">Lerp</b> (linear interpolation) does, with the alpha as the mask/T input.</li>
<li>If the <strong>Alpha</strong> is 0, the colour on screen is not changed. While a value of 1 might appear opaque due to using the full <strong>Base Color</strong>, there can still be issues with sorting <strong>Transparent</strong> objects as they do not write to the <strong>Depth Buffer</strong>. Can find more information <a href="https://www.cyanilux.com/tutorials/depth/#depth-buffer">here</a>.</li>
<li>In terms of fixing this, there isn&rsquo;t really a perfect way. Separate opaque and transparent parts of a model. Transparent objects are also sorted by the origins, so if you&rsquo;re mesh contains multiple transparent parts it&rsquo;ll sort better if you split them into separate parts. You can also force the Render Queue on the Material if you always want one transparent object to appear in-front of another. Dithering &amp; alpha clip/cutout in an opaque shader can also be used as an alternative to transparency.</li>
</ul>
</li>
<li><strong>Premultiply</strong> : Is equivalent to <code>Blend One OneMinusSrcAlpha, One OneMinusSrcAlpha</code>. When used in <strong>Unlit</strong>, it produces the same result as <strong>Alpha</strong>. In a <strong>Lit</strong> graph however, the alpha is multipled with the colour before other calculations are combined, so the other ports like <strong>Smoothness</strong>, <strong>Metallic</strong>, <strong>Ambient Occlusion</strong>, etc. will affect the result. Even at 0 alpha, you may still see something due to these settings.</li>
<li><strong>Additive</strong> : Is equivalent to <code>Blend One One</code>. In other words, the colour on the screen is added with the colour output from the shader. e.g. Red and Green produces Yellow, because that&rsquo;s how <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB colours</a> add together. Outputting a <strong>Base Color</strong> of <strong>Black</strong> (0,0,0) means no change / invisible. The <strong>Alpha</strong> port is not used.</li>
<li><strong>Multiply</strong> : Is equivalent to <code>Blend DstColor Zero</code>. In other words, the colour on the screen is multiplied with the colour output from the shader. Outputting <strong>White</strong> (1,1,1) means no change / invisible. The <strong>Alpha</strong> port is not used.</li>
</ul>

</div>
</li>
<li><strong>Alpha Clip</strong> : Toggles alpha clipping. If enabled, an <strong>Alpha Clip Threshold</strong> port will be added to the Master Stack. For each fragment/pixel, if the <strong>Alpha</strong> value is lower than the threshold the fragment is discarded, meaning it isn&rsquo;t rendered. This can be done with both surface modes. Using <strong>Opaque</strong> &amp; <strong>Alpha Clip</strong> is common for foliage effects to make sure they are sorted correctly.</li>
<li><strong>Render Face</strong> : Controls whether Front, Back or Both sides are rendered. In older versions, the option was only Front faces or <strong>Two Sided</strong>.
<ul>
<li>Be aware that for URP you may need to flip the Tangent space Normal for these faces in order to get the correct lighting/shading. You can do this with the <b class="node">Is Front Face</b> node and a <b class="node">Branch</b> like so :
<div class="img-center">
	<a href="GraphTwoSidedLit.png" target="_blank" rel="noopener noreferrer">
	<img loading="lazy" width="883" height="306" alt="(Image)" src="GraphTwoSidedLit.png" />
	</a>
	<p class="img-text"></p>
	</div></li>
<li>Rendering back or both faces in a Lit Graph might also cause issues with shadows if the <strong>Normal Bias</strong> is used on the URP Asset, as this pushes the vertices in the normal direction which might lead to self-shadowing for back faces.</li>
</ul>
</li>
<li><strong>Allow Material Override</strong> also gives you the option to expose these settings to the Material</li>
</ul>
<hr>
<h2 id="master-stack">Master Stack</h2>
<div class="img-right">
<a href="MasterStack.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="294" height="507" alt="(Image)" src="MasterStack.png" />
</a>
<p class="img-text"></p>
</div>
<p>Prior to v10, You could switch between graph types by creating a new <strong>Master Node</strong> (e.g. <b class="node">Unlit</b>, <b class="node">PBR</b>), right-clicking it and setting it as the <strong>Active</strong> one.</p>
<p>In v10 and newer you can still switch types via the Material in the Graph Settings as explained in the previous section. But &ldquo;Master nodes&rdquo; were removed and replaced by the <strong>Master Stack</strong>.</p>
<p>Unlike Master nodes, there can only be one Master Stack in the graph. Each port in the stack is attached to a <strong>Block</strong>.</p>
<p>The blocks required by the graph type will automatically change when switching the type (explained in the section above), assuming the &ldquo;Automatically Add or Remove Blocks&rdquo; option is enabled in <strong>Edit → Preferences → Shader Graph</strong>.</p>
<p>Any blocks that the previous type had (which are connected to or the default value edited), will remain in the stack but may become greyed out if the new graph type doesn&rsquo;t make use of them. For example, a <strong>Lit</strong> graph has a <strong>Smoothness</strong> block/port. If something is connected and the graph type changes to <strong>Unlit</strong>, the port will remain but become greyed out as it is no longer used.</p>
<p>Blocks in the stack can be removed by right-clicking them and selecting &ldquo;Delete&rdquo; from the dropdown.
<p class="img-clearfix"></p>
<div class="img-center">
<a href="MasterStackAdd.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="350" height="144" alt="(Image)" src="MasterStackAdd.png" />
</a>
<p class="img-text"></p>
</div></p>
<p>Blocks can also be added manually by hovering over gaps between two blocks, or at the end of the last block. Right-click and select <strong>Create Node</strong>, or press <strong>Space</strong>. While you can add blocks, they&rsquo;ll still be greyed out if the graph type doesn&rsquo;t use them.</p>
<h3 id="shader-stages">Vertex vs Fragment</h3>
<p>The stack also provides a clearer distinction between the <strong>Vertex</strong> and <strong>Fragment</strong> stages of the shader, and different blocks are available for each.</p>
<p>If you are unfamiliar, the Vertex stage runs for each vertex in the mesh being rendered, transforming the vertex positions onto the screen. Then rasterisation occurs, which produces fragments (basically pixels) from the triangles in the mesh. The Fragment stage then runs for each fragment/pixel created and outputs the colour to the screen. This is discussed in slightly more detail in my <a href="https://www.cyanilux.com/tutorials/intro-to-the-shader-pipeline">Intro to the Shader Pipeline</a> post.</p>
<p>The Vertex stage is also responsible for passing through any data (e.g. from the mesh) that may be needed in Fragment stage calculations. This is known as <strong>interpolators</strong> (as this data for each vertex is interpolated across the triangle). It is mostly handled automatically by Shader Graph - e.g. For nodes requiring UVs, the <b class="node">Position</b> node, <b class="node">Normal Vector</b> and other nodes in the <strong>Input → Geometry</strong> heading under the Create Node menu.</p>
<p>But in some cases (discussed later), we may also want to pass our own custom data between the two stages. In Shader Graph <strong>v12</strong> (Unity <strong>2021.2+</strong>), we can do this by adding <strong>Custom Interpolator</strong> blocks to the <strong>Vertex</strong> stage. I&rsquo;ll discuss this in more detail <a href="#custom-interpolators">near the end of the article</a>.</p>
<hr>
<h2 id="save-graph">Save Graph</h2>
<p>While I haven&rsquo;t explained the other parts of a graph yet, this is something that is a common problem for beginners so I&rsquo;m mentioning it early. Remember to save your graph or changes won&rsquo;t appear in <strong>Scene/Game View</strong>!</p>
<p>In newer versions using Ctrl+S might now save the graph. You can tell if it works if the <code>*</code> on the window/tab disappears.</p>
<p>Older versions did not have a shortcut and you had to use the <strong>Save Asset</strong> button in the top left corner of the graph.</p>
<p>When attempting to close the graph, it will also prompt you to save if unsaved changes have been made.</p>
<hr>
<h2 id="nodes">Nodes</h2>
<p>To add a node to the graph, right-click and choose <strong>Create Node</strong> from the dropdown, or press the <strong>Spacebar</strong>. A box will open at the mouse position allowing you to search and/or choose a node from the list. As the list is quite extensive, I recommend typing the name of a node once you learn them.</p>
<div class="img-center">
<a href="CreateNode.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="308" height="361" alt="(Image)" src="CreateNode.png" />
</a>
<p class="img-text"></p>
</div>
<h3 id="ports">Ports &amp; Connections</h3>
<p>Nodes have <strong>inputs</strong> and <strong>outputs</strong> shown as small circles, known as <strong>ports</strong>. Inputs are always on the <strong>left</strong> side of the node while outputs are on the <strong>right</strong>.</p>
<div class="img-center">
<a href="Nodes.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="678" height="509" alt="(Image)" src="Nodes.png" />
</a>
<p class="img-text">A small collection nodes, showing connections and various previews.</p>
</div>
<p>You can create connections between nodes by clicking on the port. While still holding the mouse button, drag over to another port and a connection will be made. You can only connect an output to an input. It&rsquo;s not possible to connect an input to another input, or output to another output. Output ports can also have multiple connections to other nodes, but input ports must only have a single connection.</p>
<p>(The documentation refers to these connections as &ldquo;Edges&rdquo; but I&rsquo;ve <em>never</em> heard anyone actually call them that, except for Unity that is. I&rsquo;m just going to refer to them as connections)</p>
<p>While dragging a connection from a port, If you release the mouse while <strong>not</strong> hovering over another node port, it will open the <strong>Create Node</strong> menu – filtered to only show nodes where a connection is allowed. Selecting a node from there will then automatically connect it up too. This is very useful for quickly creating graphs.</p>
<p>Existing connections can be changed by clicking and dragging on the connection wire near to the port. In v10+ it&rsquo;s also possible to drag a selection box over multiple connections coming out of a single output port, and move them all at once to another output.</p>
<div class="img-center">
<a href="MovingConnections.gif" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="484" height="208" alt="(Image)" src="MovingConnections.gif" />
</a>
<p class="img-text"></p>
</div>
<p>It&rsquo;s also possible to collapse unused ports to make the node smaller. This can be toggled with the small arrow in the top right of the node (that appears when hovering over it). You can also right-click the node and use <strong>View → Collapse Ports</strong> and <strong>Expand Ports</strong> to show all ports again.</p>
<h3 id="redirect">Redirect / Elbow</h3>
<p>In v10+ you can add a redirect/elbow node by <strong>double-clicking along the connection wire</strong>, (or right-clicking the connection and selecting it from the dropdown). This will create a tiny node with a single input and output port that allows you to better organise connections (example shown below).</p>
<p>To help keep a graph readable, you should avoid having connections pass over other nodes. I&rsquo;d also recommend keeping connections going horizontally or vertically, rather than diagonally, but this is more of a personal preference.</p>
<div class="img-center">
<a href="RedirectNodeExample.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="313" alt="(Image)" src="RedirectNodeExample.png" />
</a>
<p class="img-text">An example using (probably way to many unncessary) redirect nodes, (but hopefully you get the point).</p>
</div>
<p>Versions prior to v10 did not have this feature, but the <b class="node">Preview</b> node could be used instead, with the preview collapsed to make the node smaller to work with.</p>
<h3 id="selection">Selecting Nodes</h3>
<div class="img-center">
<a href="SelectedNode.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="498" height="144" alt="(Image)" src="SelectedNode.png" />
</a>
<p class="img-text"></p>
</div>
<p>Nodes can be selected by clicking on them using the left mouse button, or by clicking in an empty space and dragging a selection box over multiple nodes to select them all at once.</p>
<p>While holding <strong>Ctrl</strong>, you can toggle the selection of nodes rather than unselecting everything else.</p>
<h3 id="previews">Previews</h3>
<p>Most nodes will have a <strong>Preview</strong>, shown on the bottom of the node. They allow you to preview what the shader is doing at that particular stage, but the result might look different in the scene depending on the mesh used. You can also use the <b class="node">Preview</b> node to preview a particular port if it doesn&rsquo;t already have a preview.</p>
<p>Because the <strong>Preview</strong> can take up a lot of space, you can collapse it by clicking the upwards-pointing arrow that appears on the preview while hovering over it. The preview can then be shown again by clicking the downwards-pointing arrow on the bottom of the node. Alternatively, right-click the node and use <strong>View → Collapse Preview</strong> and <strong>Expand Preview</strong>.</p>
<div class="img-center">
<a href="NodePreviews.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="188" alt="(Image)" src="NodePreviews.png" />
</a>
<p class="img-text">A collection of nodes showing different previews</p>
</div>
<p>Nodes like <b class="node">Position</b> and <b class="node">Normal Vector</b> use a <strong>3D/Sphere</strong> version of the Preview rather than the <strong>2D/Quad</strong> one, as they are meant to show 3D positions/vectors. All nodes in the chain after it will also switch to using the 3D one when connected.</p>
<p>In Shader Graph <strong>v11+</strong> (Unity <strong>2021.1+</strong>) it is also now possible to choose between the 2D and 3D versions of the preview on a per-node basis. Can do this in the <strong>Node Settings</strong> tab of the <strong>Graph Inspector</strong> window. (This was something I suggested, though some others may have too. Still, I&rsquo;m very happy to see it included). For Sub Graphs you can also find a setting in the <strong>Graph Settings</strong> to select it&rsquo;s default preview state.</p>
<p>Before we can go into exactly what these previews are showing, we need to understand the different data types included in Shader Graph :</p>
<hr>
<h2 id="data-types">Data Types</h2>
<p>The <strong>colours</strong> of each port and connection will also change based on the <strong>port data type</strong>, which is also shown in brackets after the input/output name. Usually, different data types cannot be connected, though the Float/Vector types are an exception to this.</p>
<p>The data types are as follows :</p>
<ul>
<li>Float (1), light blue (referred to as Vector1 prior to v10).</li>
<li>Vector2 (2), green</li>
<li>Vector3 (3), yellow</li>
<li>Vector4 (4), pink</li>
<li>Color (Property only. Converts to Vector4 in graph, with colour space converted if using the <a href="https://docs.unity3d.com/Manual/LinearRendering-LinearOrGammaWorkflow.html">Linear workflow</a>)</li>
<li>Matrix (2x2, 3x3 or 4x4), blue</li>
<li>Boolean (B), purple</li>
<li>Texture2D (T2), red</li>
<li>Texture2DArray (T2A), red</li>
<li>Texture3D (T3), red</li>
<li>Cubemap (C), red</li>
<li>Virtual Texture (VT), grey : see <a href="https://docs.unity3d.com/2020.1/Documentation/Manual/svt-use-in-shader-graph.html">docs</a></li>
<li>SamplerState (SS), grey</li>
<li>Gradient (G), grey</li>
</ul>
<h3 id="float-vector">Float &amp; Vector</h3>
<p>A <strong>Float</strong> is a scalar (meaning single component) floating point value. While it&rsquo;s called float, it&rsquo;s precision can be changed between <strong>Single</strong> (32-bit) and <strong>Half</strong> (16-bit) on a per-node basis (under the <strong>Node Settings</strong> tab of the <strong>Graph Inspector</strong> in v10. Prior to v10, there was a <strong>cog/gear</strong> on the node itself to change this). Usually nodes will Inherit the precision of the previous one. Changing the precision can help with optimisation, mainly for mobile platforms. More information about the precision modes can be found in the <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@11.0/manual/Precision-Modes.html">docs</a>.</p>
<p>A <strong>Vector</strong> contains multiple components of these floating point values. This could be interpreted as a position or direction, but can also contain any arbitary numbers. The Vector4 contains four floating point values, Vector3 contains three, and Vector2 contains two. The precision again can be varied.</p>
<p>When put into a <b class="node">Split</b> node, we can obtain each <strong>Float</strong> the vector contains. These components are usually labelled as <strong>R, G, B, A</strong> as shaders deal with colours a lot, but Shader Graph also uses <strong>X, Y, Z, W</strong> in the case of the <b class="node">Vector2</b> / <b class="node">Vector3</b> and <b class="node">Vector4</b> nodes.</p>
<p>(The labels themselves aren&rsquo;t too important, they are the same. R=X, G=Y, B=Z and A=W)</p>
<h4 id="truncate">Truncate</h4>
<p>Unlike other data types, different size vectors can be connected to other sized vector ports. For example, A <strong>Vector3</strong> or <strong>Vector4</strong> can be connected to a <strong>Vector2</strong> port (e.g. the <strong>UV</strong> input on a <b class="node">Sample Texture 2D</b> node, some more examples are shown below).</p>
<div class="img-center">
<a href="VectorTruncate.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="211" alt="(Image)" src="VectorTruncate.png" />
</a>
<p class="img-text"></p>
</div>
<p>This will cause the vector to be <strong>truncated</strong>. In the case of the <strong>Float input</strong> port, only the <strong>R/X</strong> component is used while GBA/YZW is truncated. For a <strong>Vector2</strong>, the <strong>RG/XY</strong> components are used and BA/ZW is truncated, and <strong>Vector3</strong>, <strong>RGB/XYZ</strong> with A/W truncated.</p>
<p>A <strong>Float</strong> output can&rsquo;t be truncated as it&rsquo;s already the smallest possible size with only a single component.</p>
<h4 id="promote">Promote</h4>
<p>Similarly, a smaller sized vector put into a larger sized port will be <strong>promoted</strong>. For example, a <strong>Vector2</strong> put into a <strong>Vector3</strong>. The third component will be filled with a default value of <strong>0</strong>.</p>
<p>If put into a <strong>Vector4</strong> port, the fourth component has a default value of <strong>1</strong> (as it typically corresponds to an <strong>alpha</strong> value, and it defaults to full opaque, rather than invisible. Also useful for matrix multiplciation where the fourth component should be 1 to allow for translation. Don&rsquo;t worry about that for now though, we&rsquo;ll be going into matrices in a bit).</p>
<div class="img-center">
<a href="VectorPromote.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="246" alt="(Image)" src="VectorPromote.png" />
</a>
<p class="img-text">On the left, the Float is promoted to the Vector3 size, (0.5, 0.5, 0.5). After the add, resulting in (0.5, 0.5, 1).
</br>On the right, the Vector3 is truncated to the Vector2 size, (0, 0). After the add, resulting in (0.5, 0).</p>
</div>
<p>If a <strong>Float</strong> is connected to a <strong>Vector</strong> port, it is promoted where <strong>all components are filled with the float value</strong>. e.g. 0.5 would become (0.5,0.5,0.5,0.5) if connected to a Vector4 port. The alpha value would not default to 1 in this case too, which is something to be aware of.</p>
<p>If you wanted more control over promotion, you could handle it manually, using the Vector node that corresponds to the size you want. e.g. <b class="node">Vector2</b>, <b class="node">Vector3</b> or <b class="node">Vector4</b>. Or use the <b class="node">Combine</b> node which gives you an output for all sizes.</p>
<p>These have <strong>Float</strong> input ports for each component. If you are starting with a Vector type, you can use a <b class="node">Split</b> node to obtain each component. Of course, you would only connect the components you want to keep and override the others. Note that when a <b class="node">Split</b> is used, promotion does not take place and outputs that aren&rsquo;t used by the input Float/Vector size will be 0.</p>
<p>You can use a <b class="node">Split</b> and <b class="node">Vector4</b> or <b class="node">Combine</b> node to set each component to a specific <strong>Float</strong> if you want better control over how a vector is promoted. (<b class="node">Split</b> would not be needed if you start with a Float though since it&rsquo;s already a single component).</p>
<h3 id="dynamic-ports">Dynamic Ports</h3>
<p>While not really a data type, Some nodes also have <strong>Dynamic Vector</strong> ports. This means it can change between <strong>Float/Vector1</strong>, <strong>Vector2</strong>, <strong>Vector3</strong> and <strong>Vector4</strong> depending on the inputs.</p>
<p>Examples of these include many of the <strong>Math</strong> based nodes, e.g. <b class="node">Add</b>, <b class="node">Subtract</b>, <b class="node">Divide</b>, <b class="node">Power</b>, <b class="node">Fraction</b>, <b class="node">Normalize</b>, etc.</p>
<div class="img-center">
<a href="DynamicVectorPorts.gif" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="484" height="208" alt="(Image)" src="DynamicVectorPorts.gif" />
</a>
<p class="img-text">Add node with ports switching between Float, Vector3 and Vector2 depending on what is connected</p>
</div>
<p>In most cases, these dynamic vector ports <strong>truncate both to the same size</strong>, based on the <strong>lowest size passed in</strong> (so if a <strong>Vector3</strong> and <strong>Vector2</strong> is passed in to each port, both ports will be a <strong>Vector2</strong>). However a <strong>Float/Vector1</strong> will always be <strong>promoted to the same size as the other input</strong>.</p>
<p>The <b class="node">Multiply</b> node ports are also dynamic, but also has a special case where a <strong>Matrix</strong> (will be explained below) can also be connected. Similar to the Vectors, the Dynamic ports are <strong>truncated to the smallest of the two matrix sizes</strong> (the output also changes to a matrix type of the same size). If a matrix and vector is connected, the size of the matrix is used and the Vector will be promoted or truncated to match.</p>
<h3 id="matrix">Matrix</h3>
<p>A matrix has up to 16 components, defined in rows and columns. Shaders written in code can define matrices with different row/column sizes, and even different data types, however Shader Graph can only handle <strong>square</strong> ones consisting of floating point values (floats or halfs depending on precision).</p>
<p>A <strong>Matrix4x4</strong> means it has 4 rows and 4 columns, so 16 components in total. Similarly, a <strong>Matrix3x3</strong> has 9 components, and <strong>Matrix2x2</strong> has 4 components.</p>
<p>Matrices are used for applying transformations which consists of translation (adjusting position), rotation, and scaling. Shader Graph has a few useful spaces built-in to nodes though, such as <strong>Object</strong>, <strong>World</strong>, <strong>View</strong> and <strong>Tangent</strong>, so usually you don&rsquo;t need to deal with matrices. I&rsquo;ll be going over these spaces in more detail later. There&rsquo;s also a <b class="node">Transform</b> node to transform between these spaces.</p>
<div class="img-center">
<a href="MatrixMultiplication.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="383" height="263" alt="(Image)" src="MatrixMultiplication.png" />
</a>
<p class="img-text"></p>
</div>
<p>It is possible that you may want to handle your own transformations to a custom space too though. The <b class="node">Multiply</b> node can be used to achieve <strong>matrix multiplciation</strong> if a <strong>Matrix</strong> is connected. It&rsquo;s unlikely that you&rsquo;ll need to deal with matrix multiplication unless you&rsquo;re doing some very custom stuff, but if you aren&rsquo;t familiar with it I&rsquo;d recommend looking it up. This <a href="https://catlikecoding.com/unity/tutorials/rendering/part-1/">CatlikeCoding tutorial</a> goes over them.</p>
<p>Something to be aware of is when dealing with matrix multiplciation, the <strong>order is important</strong>. Usually the matrix will be in the first input and the vector in the second. A Vector in the second input is treated like a Matrix consisting of up to 4 rows (depending on the size of the vector), and a single column. A Vector in the first input is instead treated as a Matrix consisting of 1 row and up to 4 columns.</p>
<p>Due to the Vector promotion (explained a few sections above), if a <strong>Vector3</strong> is multiplied with a <strong>Matrix4x4</strong>, it&rsquo;ll promote the vector to a <strong>Vector4</strong> with the alpha component defaulting to 1, which allows the translation part of the matrix to work. If this isn&rsquo;t what you want, you can <b class="node">Split</b> and use <b class="node">Combine</b> or <b class="node">Vector4</b> to set the alpha component yourself.</p>
<h3 id="boolean">Boolean</h3>
<p>A type with two possible values, <strong>True</strong> or <strong>False</strong>. It is used in <strong>Logic</strong> based nodes, for example the <b class="node">Comparsion</b> node outputs a Boolean based on comparing two Floats. The Boolean is mainly used in the <strong>Predicate</strong> input of the <b class="node">Branch</b> node, which is used to select between two Floats or Vectors based on if the Boolean is True or False. For Example :</p>
<div class="img-center">
<a href="BranchNode.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="711" height="363" alt="(Image)" src="BranchNode.png" />
</a>
<p class="img-text">Example showing a Branch based on a Boolean Property. Allows switching between two different UV types. Planar projected / regular model UVs.</p>
</div>
<p>Internally the type is actually treated as a Float with a value of 0 or 1, so can be set from C# using <code>material.SetFloat</code> (or <code>SetInteger</code>).</p>
<p>Don&rsquo;t confuse the <strong>Boolean</strong> type/property with a <strong>Boolean Keyword</strong> - these are not the same! I&rsquo;ll be explaining keywords in a later section.</p>
<h3 id="textures">Textures</h3>
<p><strong>Textures</strong> store a colour for each <strong>texel</strong> - which is basically the same as a &ldquo;pixel&rdquo;, but as that is used to refer to the screen (or current render target) we instead use the term &ldquo;texels&rdquo; when referring to textures. They also aren&rsquo;t limited to just two dimensions.</p>
<p>The fragment shader stage runs on a per-pixel basis, where we can access the colour of a texel with a given coordinate. Textures can have different sizes (widths/heights/depth), but the coordinate used to sample the texture is normalised to a <strong>0-1 range</strong>. These are known as <strong>Texture Coordinates</strong> or <strong>UVs</strong> - <strong>U</strong> corrosponding to the horizontal axis of the texture, while <strong>V</strong> is the vertical.</p>
<p>(Though I mentioned texels have colours, the data doesn&rsquo;t necessary have to be output as a colour. It&rsquo;s a <strong>Vector4</strong> which could represent any arbitary data and used for any calculations. Depending on the texture&rsquo;s <a href="https://docs.unity3d.com/ScriptReference/Experimental.Rendering.GraphicsFormat.html">format</a> it might also result in values outside a 0-1 range)</p>
<h4 id="filter-modes">Filter Modes</h4>
<p>To access a colour of a texel, we <strong>sample</strong> it with <strong>filtering</strong> applied. There are 3 different <strong>Filter Modes</strong> :</p>
<ul>
<li><strong>Point</strong> (or Nearest-Point) : The colour is taken from the nearest texel. The result is blocky/pixellated, but that if you&rsquo;re sampling pixel art you&rsquo;ll likely want to use this.</li>
<li><strong>Linear / Bilinear</strong> : The colour is taken as a weighted average of close texels, based on the distance to them.</li>
<li><strong>Trilinear</strong> : The same as Linear/Bilinear, but it is also blends between mipmap levels.</li>
</ul>
<h4 id="mip-maps">Mip Maps</h4>
<p><strong>Mipmaps</strong> are versions of a texture which are smaller than the original, with each mip map level being half the size of the previous. This produces downsampled/blurry versions of the texture which is useful for lowering detail at a distance, to avoid artifacts like <a href="https://en.wikipedia.org/wiki/Moir%C3%A9_pattern">moiré patterns</a>.</p>
<p>The original texture is known as mipmap level 0. If it&rsquo;s size was 512x512, then level 1 would have a size of 256x256, level 2 would be 128x128, level 3 would be 64x64, and so on until it reaches 1x1 (level 9 in this case), or a maximum mip map chain count set in the case of textures created through C# code. You can visualise what these mipmaps look like by using the slider on the Texture Preview in Unity&rsquo;s Inspector :</p>
<div class="img-center">
<a href="MipmapExample.gif" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="484" height="295" alt="(Image)" src="MipmapExample.gif" />
</a>
<p class="img-text">Mipmap levels of an example noise texture</p>
</div>
<h4 id="wrap-modes">Wrap Modes</h4>
<p>This filtering method is stored in the sampler (<strong>SamplerState</strong>), along with a <strong>Wrap Mode</strong> :</p>
<ul>
<li><strong>Repeat</strong> : UV values outside of 0-1 will cause the texture to tile/repeat.</li>
<li><strong>Clamp</strong> : UV values outside of 0-1 are clamped, causing the edges of the texture to stretch out.</li>
<li><strong>Mirror</strong> : The texture tiles/repeats while also mirroring at each integer boundary.</li>
<li><strong>Mirror Once</strong> : The texture is mirrored once, then clamps UV values lower than -1 and higher than 2.</li>
</ul>
<h4 id="samplerstate">SamplerState</h4>
<p>Every Texture object also defines it&rsquo;s own <a href="https://docs.unity3d.com/Manual/SL-SamplerStates.html">SamplerState</a> (in DX10/11 at least, DX9 has them combined into a single &ldquo;sampler&rdquo; object but DX9 is deprecated as of Unity 2017.3 anyway. I believe OpenGL also doesn&rsquo;t support separate textures and samplers, but Shader Graph takes care of this).</p>
<p>DX11 allows you to have up to <strong>128</strong> textures in a single shader but it&rsquo;s important to be aware that there is a maximum of <strong>16</strong> samplers per shader. If you use more than 16, an error similar to <code>maximum ps_5_0 sampler register index (16) exceeded</code> will be shown. While every texture object in Shader Graph will define a sampler, if left unused the compiler will ignore them.</p>
<p>This means, in order to have more than 16 <b class="node">Sample Texture 2D</b> nodes sampling different textures, you will need to connect a <b class="node">SamplerState</b> node - Which is the equivalent of HLSL&rsquo;s <a href="https://docs.unity3d.com/Manual/SL-SamplerStates.html">inline sampler states</a>.</p>
<p>A <strong>SamplerState</strong> property could also be connected, it acts the same way. It cannot be exposed.</p>
<h4 id="texture2D">Texture2D</h4>
<p>There a few different texture types as I listed earlier.</p>
<p>Texture2D is the more common one you&rsquo;ll be familiar with and is sampled with a 2D coordinate (UV). If the UV input on the <b class="node">Sample Texture 2D</b> is left blank, it automatically uses the UV0 channel from the mesh. If the <strong>SamplerState</strong> input is left blank, it&rsquo;ll automatically use the one from the texture.</p>
<h4 id="texel-size">Texel Size &amp; Texture Size</h4>
<p>The <b class="node">Texture Size</b> node allows us access to the <strong>Width</strong> and <strong>Height</strong> of a 2D texture (in texels), as well as the size of one texel (in terms of the normalised UV coords - so equal to the reciprocal of the texture&rsquo;s width and height). In older versions of Shader Graph, the node was named <b class="node">Texel Size</b> despite only outputting the texture&rsquo;s size - hence it was renamed. You would have to use <b class="node">Reciprocal</b> to calculate the texel sizes. Later, ports for texel size was added.</p>
<p>Specifically the node obtains components of a special Vector4 property that Unity passes into the shader alongside a Texture2D, which matches the texture&rsquo;s name with <code>_TexelSize</code> appended. The <code>.xy</code> components of that are the Width &amp; Height, while <code>.zw</code> is the Texel Width &amp; Texel Height.</p>
<p>While the node is limited to Texture2D only, you could always set up your own Vector property and pass the size of a different texture type manually or through C# if required. More information about setting up properties will be discussed in a later section.</p>
<h4 id="texture3D">Texture3D</h4>
<p><strong>Texture3D</strong> is similar, but three dimensional, so has a <strong>depth</strong> to it as well as the width and height. It defines a volume of texels so must be sampled with a 3D coordinate in order to select which pixel is output. Shader Graph still labels this as a UV, though it&rsquo;s common to refer to this as a <strong>UVW</strong> coordinate too, where <strong>W</strong> refers to this depth-based axis similar to the <strong>Z</strong> axis in regular 3D space.</p>
<h4 id="texture2DArray">Texture2DArray</h4>
<p><strong>Texture2DArray</strong> is very similar to a Texture3D, it is a collection of multiple 2D textures. It is also sampled with a 3D coordinate, though the URP Shader Library functions split these into two variables - a 2D UV coordinate and an index. The same occurs on the <b class="node">Sample Texture 2D Array</b> node, with <strong>Vector2</strong> &ldquo;<strong>UV</strong>&rdquo; and <strong>Float</strong> &ldquo;<strong>Index</strong>&rdquo; ports.</p>
<h4 id="cubemap">Cubemap</h4>
<p>A <strong>Cubemap</strong> (also referred to as a TextureCube in HLSL) is another type of 2D texture array that contains 6 slices, one for each side of a cube. It is sampled with a 3D vector that points out from the center of the texture cube. The returned colour is the result of where that vector intersects it.</p>
<h3 id="gradient">Gradient</h3>
<div class="img-center">
<a href="GradientType.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="263" alt="(Image)" src="GradientType.png" />
</a>
<p class="img-text"></p>
</div>
<p>The gradient type is a bit of an odd one. The type does not exist in regular shaders, It is something specific to shader graph and is actually defined as a struct containing an array of up to 8 colour and alpha values.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Gradient</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> type;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> colorsLength;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> alphasLength;
</span></span><span style="display:flex;"><span>    float4 colors[<span style="color:#ae81ff">8</span>];
</span></span><span style="display:flex;"><span>    float2 alphas[<span style="color:#ae81ff">8</span>];
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#75715e">// From com.unity.shadergraph/ShaderGraphLibrary/Functions.hlsl</span></span></span></code></pre></td></tr></table>
</div>
</div>
<p>The values are currently something that gets <strong>hardcoded into the generated shader code</strong>, so the Gradient type (created from the Blackboard at least) <strong>cannot be exposed</strong> or set by C# scripts.</p>
<p>If you need to expose something similar to a gradient, the foldout below has a few alternatives :</p>
<button  type="button" class="foldout_button" onclick="
    this.classList.toggle('active');
    var content = this.nextElementSibling;
    if (content.style.display === 'block') {
      content.style.display = 'none';
      this.innerHTML = '<b>⯈ Alternatives</b>';
    } else {
      content.style.display = 'block';
      this.innerHTML = '<b>⯆ Alternatives</b>';

    }
"><b>⯈ Alternatives</b></button>
<div class="foldout">
<h4 id="color-properties--lerp">Color properties &amp; Lerp</h4>
<p>If you only need two colours, you can create a gradient quite easily from two <strong>Color properties</strong> and a <b class="node">Lerp</b> node. Same with three, perhaps four, but you&rsquo;ll need to link together multiple lerps and remap the <strong>T</strong> inputs. The below image provides an example for a 3-colour gradient.</p>
<div class="img-center">
<a href="Lerp3Colours.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="441" alt="(Image)" src="Lerp3Colours.png" />
</a>
<p class="img-text"></p>
</div>
<p>While this can work for even more colours, adding that many properties can be tedious.</p>
<h4 id="texture">Texture</h4>
<p>Another option (especially when lots of colours are required) is to use a <strong>Texture2D</strong> instead. We sample it with the <b class="node">Sample Texture 2D</b> with the <strong>UV</strong> coordinate as the same &ldquo;<strong>Time</strong>&rdquo; value that would have been used in the <b class="node">Sample Gradient</b> node.</p>
<p>This gives us the flexibity of more colours, and can be swapped out more easily, but a texture sample might end up being be more expensive than a math-based method, and potentially suffer from colour banding issues.</p>
<p>For creating the gradient texture, it can either be done manually in your preferred image manipulation software (e.g. Photoshop, GIMP, etc), or baked from a C# Gradient object. For example, using a function like :</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#75715e">// Converts Gradient to Texture2D</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// width defaults to 256, but can be changed if a different resolution is needed</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> Texture2D CreateGradientTexture(Gradient gradient, <span style="color:#66d9ef">int</span> width = <span style="color:#ae81ff">256</span>) {
</span></span><span style="display:flex;"><span>    Color32[] colors = <span style="color:#66d9ef">new</span> Color32[width];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; width; i++) {
</span></span><span style="display:flex;"><span>        colors[i] = gradient.Evaluate((<span style="color:#66d9ef">float</span>)i / width);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    Texture2D tex = <span style="color:#66d9ef">new</span> Texture2D(width, <span style="color:#ae81ff">1</span>, TextureFormat.ARGB32, <span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>    tex.SetPixels32(colors, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>    tex.wrapMode = TextureWrapMode.Clamp;
</span></span><span style="display:flex;"><span>    tex.Apply();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> tex;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// To save it as an asset, if that&#39;s what you want to do</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> SaveTexture2DAsset(Texture2D texture, <span style="color:#66d9ef">string</span> path = <span style="color:#e6db74">&#34;Assets/Texture.asset&#34;</span>) {
</span></span><span style="display:flex;"><span><span style="color:#75715e">#if UNITY_EDITOR</span>
</span></span><span style="display:flex;"><span>    UnityEditor.AssetDatabase.CreateAsset(texture, path);
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">#</span>endif
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Or could use this instead, to write to png : (path must end in .png)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// byte[] png = texture.EncodeToPNG();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// System.IO.File.WriteAllBytes(path, png);</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></td></tr></table>
</div>
</div>
<h4 id="custom-function">Custom Function</h4>
<p>It is also technically possible to create a Gradient object in a <b class="node">Custom Function</b> and pass it out. This is a node that allows us to write HLSL code, which is useful for accessing things that Shader Graph can&rsquo;t handle, like arrays and loops. This method still cannot be exposed to the material inspector, but can be set through C# - but only globally.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> _GradientType;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> _GradientColorsLength;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> _GradientAlphasLength;
</span></span><span style="display:flex;"><span>float4 _GradientColors[<span style="color:#ae81ff">8</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> _GradientAlphas[<span style="color:#ae81ff">16</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> Gradient_float(<span style="color:#66d9ef">out</span> Gradient output){
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Converts the float array to float2, into format that Gradient struct expects</span>
</span></span><span style="display:flex;"><span>	float2 Alphas[<span style="color:#ae81ff">8</span>];
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i=<span style="color:#ae81ff">0</span>;i&lt;<span style="color:#ae81ff">8</span>;i++){
</span></span><span style="display:flex;"><span>		Alphas[i] = float2(_GradientAlphas[i*<span style="color:#ae81ff">2</span>], _GradientAlphas[i*<span style="color:#ae81ff">2</span>+<span style="color:#ae81ff">1</span>]);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	Gradient g = {
</span></span><span style="display:flex;"><span>	_GradientType,
</span></span><span style="display:flex;"><span>	_GradientColorsLength,
</span></span><span style="display:flex;"><span>	_GradientAlphasLength,
</span></span><span style="display:flex;"><span>	_GradientColors,
</span></span><span style="display:flex;"><span>	Alphas
</span></span><span style="display:flex;"><span>	};
</span></span><span style="display:flex;"><span>	output = g;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Required to make a Gradient work as an output</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// (I think something to do with how the preview is generated)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">bool</span> isfinite(Gradient g) {
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></td></tr></table>
</div>
</div>
<p>The problem here is that these aren&rsquo;t defined as properties (and arrays can&rsquo;t be) so should be set through the <strong>Shader.SetGlobalX</strong> functions, not as per-material ones to avoid batching-related issues.</p>
<p>While it might be possible to work around this using multiple <strong>Vector4</strong> properties&hellip; It would be annoying to set these up in every graph you need an exposed Gradient for. You&rsquo;d need 12 Vector4s to support all 8 colour/alpha options, (and another Vector4 / 3 Float properties for the ints), and then you have to deal with setting them through C#.</p>
<p>Using <strong>Matrix4x4</strong> instead <em>might</em> work, that would only require 3 which is a lot better than 12. But matrices can&rsquo;t be serialised so would need to be set through C# at runtime.</p>
<p>I&rsquo;d personally recommend the <b class="node">Lerp</b> or <b class="node">Sample Texture 2D</b> approaches instead, but thought I should still mention this too&hellip; Maybe it&rsquo;ll give someone else a better idea for another workaround.</p>

</div>

<hr>
<h2 id="coordinate-spaces">Coordinate Spaces</h2>
<p>Some nodes that obtain positions/directions will have the option to switch between different <strong>Spaces</strong>, including :</p>
<ul>
<li><strong>Object</strong> : Coordinates local to the <strong>mesh</strong>. (0,0,0) is the origin/pivot of the mesh. Axis follows the &ldquo;Local&rdquo; gizmo.</li>
<li><strong>Absolute World</strong> : Coordinates based on the <strong>scene</strong>. (0,0,0) is the origin of the scene. Axis follows the &ldquo;Global&rdquo; gizmo. Similar values used to position GameObjects/Transforms while they have no parent.</li>
<li><strong>World</strong> :
<ul>
<li>In URP, same as <strong>Absolute World</strong> currently.</li>
<li>In HDRP, while <a href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@10.3/manual/Camera-Relative-Rendering.html">Camera-Relative Rendering</a> is enabled (which it is by default. It helps combat <a href="https://en.wikipedia.org/wiki/Z-fighting">z-fighting</a> by keeping values closer to 0), the space is <strong>offset by camera&rsquo;s position</strong> (but not rotation/scale). <code>World Pos = Absolute World Pos - Camera World Pos</code>.</li>
</ul>
</li>
<li><strong>View</strong> : Space is relative to the camera. (0,0,0) is at the camera&rsquo;s position. The camera forward axis looks down the <strong>Negative Z axis</strong>. If Z is positive, the vertex/fragment is behind the camera. The Z axis put through a <b class="node">Negate</b> node this gives you the <a href="https://www.cyanilux.com/tutorials/depth/#eye-depth">Eye Depth</a>.</li>
<li><strong>Tangent</strong> : Space is relative to the surface of the mesh.
<ul>
<li>The space is constructed from the mesh <strong>Tangent</strong> and <strong>Normal</strong> vectors, and a Bitangent/Binormal vector is created based on a <a href="https://en.wikipedia.org/wiki/Cross_product">Cross Product</a> between the two.</li>
<li>The X axis is the Tangent vector, the Y axis is the Bitangent vector, and Z axis it the Normal vector. The tangent vector also follows the horizontal axis of the UVs, while bitangent follows the vertical axis.</li>
<li>Tangent space is commonly used for <a href="https://docs.unity3d.com/Manual/StandardShaderMaterialParameterNormalMap.html">Normal/Bump Mapping</a>. These maps define vectors in tangent space, and it is then converted into World space for lighting/shading calculations.</li>
</ul>
</li>
</ul>
<p>While not a space that is included on nodes, it may still be useful to be aware that <strong>Clip space</strong> exists. Behind the scenes the Vertex stage converts the <strong>Object</strong> space <strong>Vertex Position</strong> (port on Master Stack) to <strong>Clip</strong> space, which is important for clipping triangles to what is visible by the camera - so we don&rsquo;t waste time trying to render fragments/pixels outside the screen. It&rsquo;s a Vector4, where the XY components range from [-W, W], where W is the fourth component of that Vector4.</p>
<p>With a bit of remapping and dividing by W, clip space is converted to <strong>Screen</strong> space, aka <b class="node">Screen Position</b> node (also known as &ldquo;Normalised Device Coordinates&rdquo; in SRP shader code). That node also has a few modes, including :</p>
<ul>
<li><strong>Default</strong> : (0,0) in the bottom left corner of the screen and (1,1) in the top right. Z/B and W/A components are 0.</li>
<li><strong>Raw</strong> : (0,0) in the bottom left corner, (W, W) in the top right. This is the position before the <strong>Perspective Divide</strong> step. For a Perspective Camera the W/A component gives you the <a href="https://www.cyanilux.com/tutorials/depth/#eye-depth">Eye Depth</a>. For Orthographic is always 1.
<ul>
<li><code>Default = Raw.xy / Raw.w</code></li>
</ul>
</li>
<li><strong>Center</strong> : Offset so (0,0) is in the center of the screen. (-1, -1) in bottom left, (1, 1) in top right.</li>
<li><strong>Tiled</strong> : Tiled using <b class="node">Fraction</b> and adjusted with screen ratio to produce squares.
<ul>
<li><code>Tiled = frac(Center * (ScreenWidth/ScreenHeight, 1))</code></li>
</ul>
</li>
<li>newer versions also have <strong>Pixel</strong> : (0,0) in the bottom left corner of the screen. Other corner values depend on screen resolution. Z/B and W/A components are 0.</li>
</ul>
<hr>
<h2 id="understanding-previews">Understanding Previews</h2>
<h3 id="preview-float">Float/Vector1</h3>
<div class="img-center">
<a href="FloatPreview.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="277" alt="(Image)" src="FloatPreview.png" />
</a>
<p class="img-text"></p>
</div>
<p>For <strong>Float</strong> types, previews are always <strong>greyscale</strong>. <strong>Black</strong> means the value is <strong>0</strong>, or <strong>negative</strong>, and <strong>White</strong> means a value of <strong>1</strong> or <strong>higher</strong>. Values in-between 0 and 1 show as different greyscale shades.</p>
<p>The exact shade isn&rsquo;t too important as it can vary depending on whether the project is using <a href="https://docs.unity3d.com/Manual/LinearRendering-LinearOrGammaWorkflow.html">Gamma or Linear colour space</a> (setting under Project Settings → Player). If you&rsquo;re using Gamma space, your previews might show more darker areas as the converison to linear isn&rsquo;t handled. Projects should use Linear as it&rsquo;s more realistic but Gamma can be more performant, especially for mobile devices.</p>
<p>Visualising values outside of a 0-1 range can be difficult, but nodes like these can help :</p>
<ul>
<li><b class="node">Negate</b> : Same as multiplying by -1, positive values become negative, negative become positive</li>
<li><b class="node">Absolute</b> : Negative values become positive, positive stays the same</li>
<li><b class="node">Fraction</b> : Returns the fractional/decimal part of the value. The value will repeat between 0 and 1. Useful for visualising values higher than 1.</li>
<li><b class="node">Step</b> : Can compare two values. If the <strong>In</strong> input is greater than or equal to the <strong>Edge</strong> input it returns 1, otherwise returns 0.</li>
</ul>
<h3 id="preview-vector">Vector</h3>
<p>For <strong>Vector</strong> types, the same applies but previews show up to <strong>three</strong> components in their respective colours (<strong>red, green, blue</strong>). The alpha channel is always ignored. Red corresponds to the first component, green the second, and blue the third.</p>
<p>As well as for colours, vectors are commonly used for <strong>positions</strong> and other coordinates. Some examples are below.</p>
<h3 id="preview-uv">UV</h3>
<div class="img-right">
<a href="UVNode.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="210" height="315" alt="(Image)" src="UVNode.png" />
</a>
<p class="img-text"></p>
</div>
<p>The <b class="node">UV</b> node for example shows a <strong>2D/Quad</strong> preview. It&rsquo;s output is a <strong>Vector4</strong>, but typically UVs (aka Texture Coordinates) are Vector2. As mentioned the 4th alpha component (which is 1 here) is ignored for previews and the 3rd component is 0 so we don&rsquo;t see any Blue, only see <strong>Red</strong> and <strong>Green</strong>. From the colours shown, we can see that the red values start in the bottom left corner at 0 as they are darker, then increase to 1 horizontally across the quad, while green starts at 0 increasing to 1 vertically.</p>
<ul>
<li>Bottom Left Vertex = 0, 0</li>
<li>Top Left Vertex = 0, 1</li>
<li>Bottom Right Vertex = 1, 0</li>
<li>Top Right Vertex = 1, 1</li>
</ul>
<p>Where values of red and green are both larger than 0, we start getting shades of yellow due to the additive nature of the <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB colour model</a>.</p>
<p>It&rsquo;s important to note that these UVs are for the <strong>Quad mesh</strong> that&rsquo;s used in previews. Meshes in the scene might have their own UVs (assuming they were UV mapped when created in a 3D modelling program, e.g. Blender) and might even make use of the Blue or Alpha channels too. e.g. For the Skybox, the UVs are actually filled with a 3D position, equal to the <b class="node">Position</b> node.</p>
<p class="img-clearfix"></p>
<p>When we use the <b class="node">Sample Texture 2D</b> node, these <strong>UVs</strong> are used as an input, where they correspond to the part of the texture to sample. In the case of the default quad UVs this just shows the texture (though since alpha is ignored it can show either black areas, or colour bleeding as some programs/formats won&rsquo;t store RGB values in areas with 0 alpha).</p>
<p>It&rsquo;s possible to offset or adjust the tiling of the UVs through <b class="node">Add</b> and <b class="node">Multiply</b> nodes, or by using the <b class="node">Tiling And Offset</b> node. We can even offset each part of the UVs by different amounts, e.g. using <b class="node">Simple Noise</b> or <b class="node">Gradient Noise</b> nodes (or noise sampled from another texture). This distorts the UV coordinates, and so the resulting texture sample is also distorted.</p>
<div class="img-center">
<a href="UVDistortion.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="266" alt="(Image)" src="UVDistortion.png" />
</a>
<p class="img-text"></p>
</div>
<p>The noise has values in a range from 0 to 1 (though this may vary depending on the noise used), so we <b class="node">Subtract</b> <strong>0.5</strong> to center the distortion. We also <b class="node">Multiply</b> by a small value to lower the strength of the distortion, as values of -0.5 and 0.5 would offset a coordinate by half of the texture.</p>
<p>Something to also note is the noise output is a <strong>Float</strong>, but the <strong>Offset</strong> is a <strong>Vector2</strong>, so it is being promoted. The distortion is using the same value in both axis of the texture so it will only ever offset in a diagonal direction towards the bottom left or top right. There is other methods that allow the distortion to be in any direction, for example using a flow map (which are very similar to Bump/Normal maps). This <a href="https://catlikecoding.com/unity/tutorials/flow/texture-distortion/">CatlikeCoding</a> article is a good example of those, also offset by repeating time to create flowing water materials.</p>
<h3 id="preview-position">Position</h3>
<div class="img-right">
<a href="PositionNode.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="180" height="274" alt="(Image)" src="PositionNode.png" />
</a>
<p class="img-text"></p>
</div>
<p>The <b class="node">Position</b> node shows similar colours, but shows a <strong>3D/Sphere</strong> and the output is <strong>Vector3</strong>. Again no blue shades are shown, but this time it&rsquo;s because the side of the sphere facing us is the negative Z axis. The blue parts of the sphere are hidden on the other side. We can <b class="node">Negate</b> the result to flip everything and blue will be shown. We can also use an <b class="node">Absolute</b> node to bring negative values back into a positive range.</p>
<p>In the preview, the center is the point (0,0,0), with the X axis (red) increasing to the right, and decreasing to the left. The Y axis (green) increasing upwards and decreasing downwards. The values range from -0.6 to 0.6 in each axis but this isn&rsquo;t important as it will vary depending on the mesh and space used.</p>
<p>Visualising some positions in the <strong>Scene View</strong> can be difficult. e.g. For <strong>World</strong> space, <strong>(0,0,0)</strong> (visualised as black) would be near the scene&rsquo;s origin, but the object the shader is applied to could be much further away. I find it useful to put the position through a <b class="node">Fraction</b> node to see each unit square, especially when trying to debug something like <a href="https://www.cyanilux.com/tutorials/depth/#reconstruct-world-pos">Reconstructing a position from Depth</a>.</p>
<p class="img-clearfix"></p>
<hr>
<h2 id="main-preview">Main Preview</h2>
<p>You can also use the <strong>Main Preview</strong> window to view the final shader result based on what is connected to the <strong>Master Stack</strong> (or active <b class="node">Master Node</b>), though personally I prefer to view the shader applied to an object in the <strong>Scene View</strong> instead.</p>
<div class="img-center">
<a href="MainPreview.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="368" height="368" alt="(Image)" src="MainPreview.png" />
</a>
<p class="img-text">Example Main Preview for a Soft Foliage Shader, showing a custom mesh</p>
</div>
<p>Use the button in the top right of the graph to toggle the <strong>Main Preview</strong> window. The window can be resized by dragging the bottom right corner of it (same goes for the other windows). Unlike node previews, this will show alpha/transparency.</p>
<p>Dragging will rotate the model. It doesn&rsquo;t move the camera or light direction though so this isn&rsquo;t always useful.</p>
<p>Right-clicking anywhere inside the window will also allow you to change the <strong>mesh</strong> being used. It defaults to a sphere mesh, but strangely it&rsquo;s not the same as the &ldquo;Sphere&rdquo; on the dropdown. The default (which is the same sphere used for node previews) has UVs that wrap around it <strong>twice</strong>, while the one on the dropdown is the same as Unity&rsquo;s default sphere mesh which has UVs that wrap around <strong>once</strong>. This isn&rsquo;t too important since it&rsquo;s just a preview, but it might be something to be aware of still.</p>
<hr>
<h2 id="blackboard">Blackboard Window</h2>
<p>Shaders can expose some of these data types as <strong>Properties</strong>, which are created from the <strong>Blackboard</strong> window. The visibility of the window can be toggled using the button in the top right of the graph.</p>
<h3 id="path">Path</h3>
<p>The <strong>Blackboard</strong> window also allows you to adjust the <strong>path</strong> of the shader when it appears in the <strong>Shader dropdown menu</strong> on the Material. This is the grey text under the graph name at the top.</p>
<div class="img-center">
<a href="Blackboard.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="275" height="179" alt="(Image)" src="Blackboard.png" />
</a>
<p class="img-text"></p>
</div>
<p>By default it shows under the &ldquo;Shader Graphs&rdquo; heading but this can be changed. It <em>really</em> doesn&rsquo;t look like an editable field - but you can <strong>double-click</strong> it and it will change into a editable field.</p>
<p>You can also use slashes to create sub-headings to organise your shaders better.</p>
<h3 id="properties">Properties</h3>
<p>To create a <strong>Property</strong>, use the &ldquo;+&rdquo; button in the <strong>Blackboard</strong>, a menu will be shown with the different data types as listed earlier. Once created we can name the property. Right-clicking the property will give us options like <strong>Rename</strong>, <strong>Delete</strong> and in v10+ <strong>Duplicate</strong> was also added.</p>
<p>If we have a data type node in the graph, (e.g. Nodes like <b class="node">Float</b>, <b class="node">Vector2</b>, <b class="node">Color</b>, etc), we can also right-click them and choose <strong>Convert To → Property</strong> from the dropdown to create the property automatically, with the default value set from the value it had before converting. It&rsquo;s also possible to convert a property back using <strong>Convert To → Inline Node</strong> if required. These can be done to multiple nodes/properties at once if multiple are selected.</p>
<p>Each property in the <strong>Blackboard</strong> can be dragged into the graph to add it as a node. You can also use the <strong>Create Node</strong> menu by typing it&rsquo;s name, or &ldquo;Property&rdquo; to see all of them.</p>
<div class="img-center">
<a href="PropertySettings.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="735" height="268" alt="(Image)" src="PropertySettings.png" />
</a>
<p class="img-text"></p>
</div>
<p>Prior to v10, an arrow was on the left of each property to expand extra settings for it. In v10+ these settings were moved to the <strong>Graph Inspector</strong> window in the <strong>Node Settings</strong> tab. While a property is selected in the <strong>Blackboard</strong> or in the graph, the settings will appear there. (I&rsquo;m personally not a fan of this change as it makes creating properties a bit awkward when having to go back and forth between two separate windows, so I&rsquo;m very much hoping it&rsquo;s reverted).</p>
<p>The settings available for each property can vary slightly but most types will have <strong>Reference</strong>, <strong>Exposed</strong>, <strong>Default</strong> and <strong>Precision</strong> options. Some also have additional <strong>Modes</strong>. I&rsquo;ll discuss these in the sections below.</p>
<p>Some may also include a &ldquo;<strong>Override Property Declaration</strong>&rdquo; (or &ldquo;Hybrid Instanced&rdquo; prior to v10). The <strong>Hybrid Per-Instance</strong> option on this is related to the <a href="https://docs.unity3d.com/Packages/com.unity.rendering.hybrid@latest">DOTS Hybrid Renderer</a>. I&rsquo;m not very familiar with DOTS, so if you want more information about it, see <a href="https://learn.unity.com/tutorial/what-is-dots-and-why-is-it-important">here</a> and <a href="https://unity.com/dots">here</a>. There&rsquo;s also <strong>Global</strong> and <strong>Per-Material</strong> options but I would avoid overriding the property declaration unless you are using the Hybrid Renderer as it can break the <a href="https://www.cyanilux.com/tutorials/intro-to-the-shader-pipeline/#srp-batcher">SRP Batcher</a> compatibility.</p>
<h4 id="property-reference">Reference</h4>
<p>The settings for each property can vary slightly, but all will have a <strong>Reference</strong> field.</p>
<p>Prior to v12 (Unity 2021.2) this defaults to an auto-generated string, while v12+ attempts to use the same as the name, but with &ldquo;_&rdquo; appended to the front (and in place of any spaces/hyphens/other symbols). This reference field is important for setting the property from a C# script, which will be discussed in a later section.</p>
<p>You can edit this reference if you&rsquo;d like. I&rsquo;d recommend making it begin with an underscore (&quot;_&quot;) as this helps avoid issues with certain words - specifically words that are used as important keywords in HLSL or the Shaderlab section of the generated shader code.</p>
<p>For example, &ldquo;Cull&rdquo;, &ldquo;Offset&rdquo;, &ldquo;float&rdquo;, &ldquo;void&rdquo; will cause the graph to break. Might show a similar error to <code>syntax error: unexpected TOK_CULL, expecting TVAL_ID or TVAL_VARREF</code>. But &ldquo;_Cull&rdquo;, &ldquo;_Offset&rdquo;, etc would work fine (though have nothing to do with the actual Cull/Offset functions, it&rsquo;s just a string/name used to identify the property). Note that in v12+ Shader Graph automatically attempts fix references like this in order to prevent errors.</p>
<p>Note that the SamplerState node generates it&rsquo;s reference based on the other settings so it cannot be edited. That data type also cannot be set through C# though.</p>
<h4 id="property-exposed">Exposed / Scope</h4>
<p>Most properties will also have an <strong>Exposed</strong> tickbox, or <strong>Scope</strong> dropdown in newer versions (with Local or Global options).</p>
<p>If exposed/local, these properties will appear in the <strong>Inspector</strong> window when viewing a <strong>Material</strong> (Unity&rsquo;s regular Inspector that is, not the Graph Inspector). Materials allow you to have separate textures/values for each instance, while still sharing the same shader. These properties can also be set through C# as I&rsquo;ll explain later.</p>
<p>If un-exposed/global, the properties will not appear on the Material, but can still be set from C# as a <strong>Global Shader Property</strong> - by using the static methods in the <a href="https://docs.unity3d.com/ScriptReference/Shader.html">Shader</a> class. This means all instances of the material, and even materials sharing the same reference will use that value. This can be very useful for easily sending data into all shaders/materials that shouldn&rsquo;t change per-object.</p>
<p>Not all properties in the Blackboard can be exposed however. e.g. <strong>Matrices</strong>, <strong>SamplerState</strong> and <strong>Gradient</strong> objects. (Though matrices <em>can</em> actually be set locally (on material) through C#)</p>
<h4 id="property-default">Default Value / Preview Value</h4>
<p>The <strong>Default</strong> field is the value the property will default to when a <strong>Material</strong> is first created.</p>
<p>If a <strong>Material</strong> is already created, changing the <strong>Default</strong> values for an exposed property won&rsquo;t affect them. You would have to adjust the value on the material manually through Unity&rsquo;s <strong>Inspector</strong>. Be aware of this as it&rsquo;s a common issue that you might encounter when trying to debug your shader. If your shader is producing different results in-graph than in-scene, the values on the <strong>Material</strong> would be the first place to check. (If the problem isn&rsquo;t there, it could also be related to the mesh, e.g. UV Mapping related, if your shader is using the UV channels that is).</p>
<p>It is also the value that will be used in the node <strong>Previews</strong> so it can be important to set this field.</p>
<h4 id="property-modes">Modes</h4>
<div class="img-center">
<a href="PropertyModeExamples.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="275" alt="(Image)" src="PropertyModeExamples.png" />
</a>
<p class="img-text"></p>
</div>
<p>Some properties will have different &ldquo;<strong>Modes</strong>&rdquo;, with options shown in these foldouts :</p>
<button  type="button" class="foldout_button" onclick="
    this.classList.toggle('active');
    var content = this.nextElementSibling;
    if (content.style.display === 'block') {
      content.style.display = 'none';
      this.innerHTML = '<b>⯈ Float</b>';
    } else {
      content.style.display = 'block';
      this.innerHTML = '<b>⯆ Float</b>';

    }
"><b>⯈ Float</b></button>
<div class="foldout">
<ul>
<li><strong>Default</strong> : Shows a regular float field in the Material Inspector.</li>
<li><strong>Slider</strong> : Equivalent of the &ldquo;Range&rdquo; property in shader code. Can set a <strong>Minimum</strong> and <strong>Maximum</strong> value. The property will appear with a slider in the inspector. Setting from C# can still cause the value to go outside the slider&rsquo;s range. If this isn&rsquo;t intended you&rsquo;ll need to clamp the value manually. In 2019.3+ you can obtain the min/max from the property, see an example <a href="https://twitter.com/Cyanilux/status/1337181494729699328">here</a>.</li>
<li><strong>Integer</strong> : Shows a field that can only be set to integer values. Still acts as a float behind the scenes though. If setting from C#, Unity provides a SetInteger / SetGlobalInteger method.</li>
<li><strong>Enum</strong> : This should show as a dropdown of values, based on a C# enum or string of values (like &ldquo;A, 1, B, 2&rdquo;). But while this option is included there doesn&rsquo;t seem to be a way to set that C# enum or string&hellip; so it doesn&rsquo;t work.</li>
</ul>

</div>

<button  type="button" class="foldout_button" onclick="
    this.classList.toggle('active');
    var content = this.nextElementSibling;
    if (content.style.display === 'block') {
      content.style.display = 'none';
      this.innerHTML = '<b>⯈ Color</b>';
    } else {
      content.style.display = 'block';
      this.innerHTML = '<b>⯆ Color</b>';

    }
"><b>⯈ Color</b></button>
<div class="foldout">
<ul>
<li><strong>Default</strong> : A regular colour. From the Material Inspector it can only be set to values between 0 and 1. From C# it can be set outside that range, though be aware that the final shader won&rsquo;t be able to output values outside the range unless HDR is enabled on the URP Asset.</li>
<li><strong>HDR</strong> (High Dynamic Range) : A colour where values can be outside the 0-1 range. The inspector shows this by having an <strong>Intensity</strong> slider added to the Colour Picker UI. In terms of setting this from C#, you can multiply the Color with a float if you want a brighter result e.g. <code>material.SetColor(&quot;_Color&quot;, Color.red * 5f);</code>. If you care about keeping it using the same result as the UI, multiply by <code>2^Intensity</code> (aka <code>color * Mathf.Pow(2, intensity</code>) instead.</li>
</ul>
<p>As a note, prior to v10 Unity didn&rsquo;t correct HDR colours to the correct colorspace for the project. Graphs imported into v10+ will show the property as &ldquo;Deprecated&rdquo; but it can be upgraded in the <strong>Node Settings</strong> tab of the <strong>Graph Inspector</strong>, assuming you want the proper behaviour. If you&rsquo;re in v10+ and want the old behaviour, You can also use a <b class="node">Colorspace Conversion</b> node to convert from <strong>RGB</strong> to <strong>Linear</strong> to mimic it.
</div>

<button  type="button" class="foldout_button" onclick="
    this.classList.toggle('active');
    var content = this.nextElementSibling;
    if (content.style.display === 'block') {
      content.style.display = 'none';
      this.innerHTML = '<b>⯈ Texture2D</b>';
    } else {
      content.style.display = 'block';
      this.innerHTML = '<b>⯆ Texture2D</b>';

    }
"><b>⯈ Texture2D</b></button>
<div class="foldout">
<ul>
<li><strong>White</strong> : Defaults to white (1,1,1,1) when a texture isn&rsquo;t assigned.</li>
<li><strong>Black</strong> : Defaults to black (0,0,0,0) when a texture isn&rsquo;t assigned.</li>
<li><strong>Grey</strong> : Defaults to grey (0.5,0.5,0.5) in <strong>Gamma</strong> colour space only, when a texture isn&rsquo;t assigned. Alpha of 0.5 in both colour spaces.</li>
<li><strong>Bump</strong> (renamed to <strong>Normal Map</strong> in v12+) : Defaults to (0.5,0.5,1,0.5) when a texture isn&rsquo;t assigned. This should always be used for tangent space bump/normals maps. The colour converts to a normal direction of (0,0,1).</li>
<li><strong>Linear Grey (v12+)</strong> : Defaults to (0.5,0.5,0.5,0.5) in both <strong>Linear</strong> and <strong>Gamma</strong> colour spaces, when a texture isn&rsquo;t assigned. See the [LinearOrGammaWorkflow docs page] for more information on color spaces.</li>
</ul>
<p>Note that other texture types (Texture3D, Texture2DArray, Cubemap, etc) default to the <strong>Grey</strong> mode when a texture (despite the generated code trying to use <code>&quot;white&quot;</code>, which isn&rsquo;t a valid mode for those types)
</div>

<h4 id="property-precision">Precision</h4>
<p>All properties will also have a <strong>Precision</strong> option, which can be changed between <strong>Inherit</strong>, <strong>Single</strong> (32-bit) and <strong>Half</strong> (16-bit). If set to <strong>Inherit</strong> the properties will default to the <strong>Precision</strong> in the <strong>Graph Settings</strong> tab of the <strong>Graph Inspector</strong>.</p>
<p>I usually don&rsquo;t worry to much about the precision, but it may be important if you&rsquo;re targetting mobile platforms. It can help to make the shader more performant. You can learn more about precision in the <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@11.0/manual/Precision-Modes.html">shadergraph docs</a>.</p>
<h4 id="setting-properties">Setting Properties from C#</h4>
<p>Properties can also be set from a <strong>C# script</strong> through the <a href="https://docs.unity3d.com/ScriptReference/Material.html">Material</a> class (only if exposed), or set globally through the static methods in the <a href="https://docs.unity3d.com/ScriptReference/Shader.html">Shader</a> class. Follow those links to see a list of these methods. When setting a property using them, it&rsquo;s important to use the <a href="#property-reference">Reference</a> of the property, and not it&rsquo;s name in the <strong>Blackboard</strong>.</p>
<p>Note, since a <strong>Matrix</strong> cannot be exposed, by default they are declared in the <strong>UnityPerMaterial</strong> cbuffer which allows the SRP Batcher to function and the matrix can be different for each material. This however leads to garbage results when setting the matrix globally. If you want a global matrix, you should use the <strong>Override Property Declaration</strong> in the Node Settings to force it to <strong>Global</strong>. Don&rsquo;t override it for other property types (unless you know what you are doing) as it can break SRP Batcher compatibility.</p>
<p>For more information and example code on setting properties from C#, see the section in my <a href="https://www.cyanilux.com/tutorials/intro-to-the-shader-pipeline/#properties">Intro to the Shader Pipeline post</a>. It&rsquo;s also important to understand the difference between using <code>Renderer.material</code> and <code>Renderer.sharedMaterial</code>, so see the section <a href="https://www.cyanilux.com/tutorials/intro-to-the-shader-pipeline/#material-instances">here</a> too.</p>
<h3 id="keywords">Keywords &amp; Shader Variants</h3>
<div class="img-center">
<a href="Keywords.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="241" height="212" alt="(Image)" src="Keywords.png" />
</a>
<p class="img-text"></p>
</div>
<p>As well as Properties, the <strong>Blackboard</strong> also allows us to add <strong>Keywords</strong>. In the &ldquo;+&rdquo; menu, under the Keywords heading there is the following options :</p>
<ul>
<li><strong>Boolean Keyword</strong> : Keyword consisting of two states, labelled as <strong>On</strong> and <strong>Off</strong>.</li>
<li><strong>Enum Keyword</strong> : Keyword consisting of multiple states (up to a maximum of 8). You can select the display text used for each entry, but note that the Material Inspector may not update unless Unity is reloaded.</li>
<li>Built-in Keywords, currently consisting of only :
<ul>
<li><strong>Material Quality</strong> : Same as Enum but predefined by Unity. I believe <strong>HDRP</strong> has a <strong>Material Quality Level</strong> somewhere in it&rsquo;s Quality settings (under Project Settings → HDRP). However, URP does not seem to have this so I&rsquo;m unsure if it can be set, without perhaps using C#, e.g. <code>Shader.EnableKeyword(&quot;MATERIAL_QUALITY_HIGH&quot;)</code> though I haven&rsquo;t tested that. I&rsquo;d recommend using a custom Enum instead as you&rsquo;d have better control over it.</li>
</ul>
</li>
</ul>
<p>Keywords allow you to create <strong>multiple versions of the shader</strong>, with and without calculations included. These are known as <a href="https://docs.unity3d.com/Manual/SL-MultipleProgramVariants.html">Shader Variants</a>. Each <strong>Material</strong> uses the given shader but can enable/disable keywords to select which variant is used.</p>
<p>Shader Graph has a set maximum number of <strong>Shader Variants</strong> that can be generated, which defaults to <strong>128</strong>. A warning should show if your shader generates more than the maximum (though that seems to be bugged in v10.2.2 due to a NullReferenceException). Only variants produced from Keywords created in the <strong>Blackboard</strong> counts for the maximum, keywords used interally won&rsquo;t affect it.</p>
<p>The maximum can be edited in <strong>Edit → Preferences → Shader Graph</strong>, however it is important to realise that with each keyword added it <strong>exponentially creates more variants</strong>. And more variants will also slow down build times. With 7 Boolean Keywords (2 states, On and Off), the shader produces 2^7 or 128 variants, so hits the limit exactly. I recommend to be careful with keywords as you don&rsquo;t want to over-use them for everything. They should be used in a situation where you need to toggle an effect because it would greatly affect performance if a <b class="node">Branch</b> was used instead (which would still calculate both sides and discard one).</p>
<p>Each keyword can be dragged into the graph to add it as a node. You can also use the <strong>Create Node</strong> menu by typing it&rsquo;s name, or &ldquo;Keyword&rdquo; to see all of them. The created node will resemble other nodes and have input ports (either On/Off for the <strong>Boolean Keyword</strong>, or the Entries for the <strong>Enum Keyword</strong>). Only <strong>Floats</strong> and <strong>Vector</strong> types can be connected.</p>
<div class="img-center">
<a href="KeywordSettings.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="202" alt="(Image)" src="KeywordSettings.png" />
</a>
<p class="img-text"></p>
</div>
<p>Similar to Properties, you can find settings for each keyword under the <strong>Graph Inspector</strong> window in the <strong>Node Settings</strong> tab. While a keyword is selected in the <strong>Blackboard</strong>, the settings will appear there. (Prior to v10, an arrow was on the left of each keyword to expand extra settings for it).</p>
<p>Strangely, selecting the keyword node in the graph does not show the settings. I assume this wasn&rsquo;t intended and might be fixed in the future.</p>
<h4 id="keyword-scope">Scope</h4>
<p>Each keyword has a <strong>Scope</strong> setting, which can be set to <strong>Local</strong> or <strong>Global</strong>. This can affect how the keyword is set from C#, as explained in the next section. It does not affect how the keyword is exposed in the <strong>Material Inspector</strong> however. The inspector will always toggle the keyword locally.</p>
<p>There is a maximum of <strong>256 Global</strong> keywords that can be used <strong>per-project</strong>. Unity uses some of these interally, (apparently around 60 but that was referring to the Built-in RP). <strong>Local</strong> keywords have a maximum of <strong>64 per-shader</strong>.</p>
<p>These limits cannot be changed, so it is recommended to always use <strong>Local</strong> keywords (unless you need to set it globally through C# that is).</p>
<h4 id="keyword-exposed">Exposed</h4>
<p>To expose a <strong>Boolean Keyword</strong> in the <strong>Material Inspector</strong> it&rsquo;s <strong>Reference</strong> must end in &ldquo;_ON&rdquo;.</p>
<p>For versions prior to v10, keywords had the <strong>Exposed</strong> tickbox but this still required the &ldquo;_ON&rdquo; suffix. The tickbox could only be used to <em>un-expose</em> the keyword if it had the suffix. This was removed in v10+, but you can always use a reference without the suffix if you don&rsquo;t want it exposed.</p>
<p><strong>Enum Keywords</strong> are always exposed by default and there doesn&rsquo;t appear to be a way to set it as unexposed since the tickbox was removed. This shouldn&rsquo;t be that important though as the keyword can still be accessed from C# regardless of whether it is exposed or not.</p>
<h4 id="keyword-definition">Definition</h4>
<p>Each keyword has a definition field which has the following options :</p>
<ul>
<li><strong>Shader Feature</strong> : Unity will strip unused shader variants at build time.</li>
<li><strong>Multi Compile</strong> : Unity does not strip any shader variants.</li>
<li><strong>Predefined</strong> : Unity or the Render Pipeline has already defined the keyword so it should not be redefined. This is used only to create an &ldquo;<code>#ifdef REF</code>&rdquo; (aka <code>#if defined(REF)</code>) check on the given reference.
<ul>
<li>Prior to v10 it was possible to use this to output different values based on the shader pass. However due to changes it can only be done through a Custom Function now. More information and examples can be found in the <a href="#shader-pass-defines">Shader Pass Defines</a> section (under the Advanced heading at the end of the post).</li>
</ul>
</li>
</ul>
<p>It&rsquo;s important to be aware that since <strong>Shader Feature</strong> strips unused variants from the build, it is not recommended to set the keywords at runtime from C#, since the required variant might not be included and result in a magenta error shader. If you plan on adjusting keywords at runtime, you should use <strong>Multi Compile</strong> instead.</p>
<h4 id="setting-keywords">Setting Keywords from C#</h4>
<p>To adjust keywords in C#, we can use <strong>EnableKeyword</strong> and <strong>DisableKeyword</strong> methods in the <a href="https://docs.unity3d.com/ScriptReference/Material.html">Material</a> class to toggle a keyword per-material, or the <a href="https://docs.unity3d.com/ScriptReference/Shader.html">Shader</a> class to toggle a keyword globally, for all materials. Like properties, the string used to toggle a keyword in C# is it&rsquo;s <strong>Reference</strong> field in the <strong>Blackboard</strong>.</p>
<p>Keywords using the <strong>Global</strong> scope can be set through either class. Note that if a keyword is enabled globally through <code>Shader.EnableKeyword</code> it cannot be disabled or overriden using <code>Material.DisableKeyword</code> (or the inspector toggle).</p>
<p>Keywords using the <strong>Local</strong> scope can only be set through methods in the <a href="https://docs.unity3d.com/ScriptReference/Material.html">Material</a> class.</p>
<p>It is also recommended to only adjust <strong>Multi Compile</strong> keywords at runtime, see <a href="#keyword-definition">Definition</a> section below for more information.</p>
<p>For example, for <strong>Boolean Keywords</strong> :</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>Material material = GetComponent&lt;Renderer&gt;().sharedMaterial;
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Or use material, if you want to create an instance.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// This would be important if you only want to enable the keyword for this GameObject/Renderer</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// See https://www.cyanilux.com/tutorials/intro-to-the-shader-pipeline/#material-instances</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Enables EXAMPLE_KEYWORD on material</span>
</span></span><span style="display:flex;"><span>material.EnableKeyword(<span style="color:#e6db74">&#34;EXAMPLE_KEYWORD&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Disable EXAMPLE_KEYWORD on material</span>
</span></span><span style="display:flex;"><span>material.DisableKeyword(<span style="color:#e6db74">&#34;EXAMPLE_KEYWORD&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Enable Globally, (Only for Global Scope)</span>
</span></span><span style="display:flex;"><span>Shader.EnableKeyword(<span style="color:#e6db74">&#34;EXAMPLE_KEYWORD&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Disable Globally, (Only for Global Scope)</span>
</span></span><span style="display:flex;"><span>Shader.DisableKeyword(<span style="color:#e6db74">&#34;EXAMPLE_KEYWORD&#34;</span>);</span></span></code></pre></td></tr></table>
</div>
</div>
<p>For an <strong>Enum Keyword</strong> you need to append the <strong>Entry&rsquo;s Reference</strong> to the <strong>Keyword Reference</strong>, separated with &ldquo;_&rdquo; to obtain the full string to use in the C# methods. The references for each entry is shown in the table in the <strong>Node Settings</strong> tab.</p>
<p>As an example, a <strong>Keyword</strong> with a <strong>Reference</strong> of &ldquo;ENUM&rdquo; and the entry &ldquo;A&rdquo;, can be toggled using &ldquo;ENUM_A&rdquo;. You also shouldn&rsquo;t enable multiple entries at the same time. To switch between entires, you should always disable the others or the variant used might not change properly. e.g.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>material.EnableKeyword(<span style="color:#e6db74">&#34;ENUM_A&#34;</span>);
</span></span><span style="display:flex;"><span>material.DisableKeyword(<span style="color:#e6db74">&#34;ENUM_B&#34;</span>);
</span></span><span style="display:flex;"><span>material.DisableKeyword(<span style="color:#e6db74">&#34;ENUM_C&#34;</span>);</span></span></code></pre></td></tr></table>
</div>
</div>
<hr>
<h3 id="categories">Categories</h3>
<div class="img-right">
<a href="Categories.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="317" height="455" alt="(Image)" src="Categories.png" />
</a>
<p class="img-text"></p>
</div>
<p>In v12+ it is also now possible to create <strong>Categories</strong>, to better organise the properties in the <strong>Blackboard</strong> (and in the Inspector when viewing the material).</p>
<p>Can create them from the <strong>+</strong> button (same that you would use to add a property/keyword), then rename by double-clicking the Grey &ldquo;Category&rdquo; text.</p>
<p>They are also collapsable (by pressing the triangle to the left) which is useful if the graph has a large amount of properties.</p>
<p class="img-clearfix"></p>
<hr>
<h2 id="groups">Grouping Nodes</h2>
<p>To help with organising your graphs, you can group sections of nodes together. Drag a selection box over multiple nodes, right-click on one of those selected nodes, then choose <strong>Group Selection</strong>. Or use the <strong>Ctrl+G</strong> shortcut.</p>
<div class="img-center">
<a href="NodeGroup.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="305" alt="(Image)" src="NodeGroup.png" />
</a>
<p class="img-text">Example section of a graph containing a couple grouped nodes. Helps to understand what the nodes are doing at a quick glance.</p>
</div>
<p>Once a group is created you can give it a name which appears at the top in a large text size.  The group can also be renamed at any time by double-clicking the name. The name will always be on a single line and affect the width of the group so it&rsquo;s a good idea to keep it short.</p>
<p>A group can be moved around (along with it&rsquo;s contents) by dragging the group&rsquo;s name.</p>
<p>If you want to remove nodes from the group, select them and use <strong>Ungroup Selection</strong> or <strong>Ctrl+U</strong> to separate them from the group.</p>
<p>To delete a group entirely without affecting it&rsquo;s contents, select the group by clicking it&rsquo;s name, then use the <strong>Delete</strong> key on your keyword. To delete a group with it&rsquo;s contents, right-click the group and use the option from that dropdown.</p>
<hr>
<h2 id="sticky-notes">Sticky Notes</h2>
<p>You can also add <strong>Sticky Notes</strong> to a graph (Added in v7.4-ish?), by right-clicking an empty space in the graph and selecting <strong>Create Sticky Note</strong> from the dropdown.</p>
<div class="img-center">
<a href="StickyNote.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="487" height="187" alt="(Image)" src="StickyNote.png" />
</a>
<p class="img-text"></p>
</div>
<p>These are for adding comments to your graph. They have a text field at the top for a title, and a larger box for the text body. The text can be edited by double-clicking one of the fields. They can also be resized by dragging the edges.</p>
<p>Right-clicking the Sticky Note will give you some additional options including :</p>
<ul>
<li>Toggle Light/Dark Theme : Switch between the Light and Dark themes. Currently it&rsquo;s not possible to change the colour further than this.</li>
<li>Small, Medium, Large or Huge Text Size : Adjusts the text size. This changes for both the title and body at the same time. The title will always have larger text size than the body.</li>
<li>Fit To Text : Resizes the Sticky Note so that it precisely fits it&rsquo;s contents. It will resize horizontally to fit the title on a single line.</li>
<li>Delete : Deletes the Sticky Note</li>
</ul>
<p>In <strong>v11+</strong> (Unity <strong>2021.1+</strong>) it should also now be possible to use <a href="https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/StyledText.html">Rich Text</a> to add additional formatting like bold (using <code>&lt;b&gt;example&lt;/b&gt;</code>), italics <code>&lt;i&gt;example&lt;/i&gt;</code>, colors (<code>&lt;color=red&gt;example&lt;/color&gt;</code>), etc.</p>
<hr>
<h2 id="shortcuts">Shortcut Keys</h2>
<p>There are a few keyboard shortcuts available to speed up working with Shader Graph. Some of these might have been mentioned in other sections. These shortcuts include:</p>
<ul>
<li><strong>Space</strong> : Access the <strong>Create Node</strong> menu</li>
<li><strong>A</strong> : Fits the graph to the viewport. Useful if you want to quickly zoom out to see the entire graph.</li>
<li><strong>F</strong> : Focuses on a selected node (/group of nodes). If nothing is selected, it does the same as the above.</li>
<li><strong>O</strong> : Moves the viewport to the origin of the graph. This might not really be useful though.</li>
<li><strong>Ctrl</strong> : While held, clicking nodes/properties will toggle selection of them</li>
<li><strong>Ctrl+X</strong> : Cut a selection of nodes</li>
<li><strong>Ctrl+C</strong> : Copy a selection of nodes</li>
<li><strong>Ctrl+V</strong> : Paste a selection of nodes</li>
<li><strong>Ctrl+D</strong> : Duplicate a selection of nodes</li>
<li><strong>F1</strong> : Open the Documentation for a specific node (Note, some pages might not exist / be missing). See the full <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@11.0/manual/Node-Library.html">Node Library here</a>.</li>
<li><strong>Ctrl+G</strong> : Group a selection of nodes. If nodes were already in a group, they will be removed from the previous one and added to the new group.</li>
<li><strong>Ctrl+U</strong> : Remove a selection of nodes from a group</li>
<li><strong>Delete</strong> : Deletes selected connections and nodes. If a group is selected, the group is deleted without affecting it&rsquo;s contents (unless they are selected too). Some nodes, like a Sub Graph&rsquo;s <b class="node">Output</b> node cannot be deleted.</li>
<li><strong>Shift + Space</strong> : Toggles Maximize on the Unity window the mouse is currently hovering over. This is one of Unity&rsquo;s shortcuts for all windows, not just Shader Graph. The shortcut can be edited via Edit → Shortcuts&hellip; → Window.</li>
</ul>
<p>Shader Graph currently does not have any shortcuts for easily placing/creating nodes.</p>
<hr>
<h2 id="sub-graphs">Sub Graphs</h2>
<p>As briefly mentioned earlier in the post, a <strong>Sub Graph</strong> is special type of graph that can be used as a <strong>node</strong> in other graphs, which is useful for functions you&rsquo;d like to reuse. They can even be nested in other Sub Graphs (though it&rsquo;ll prevent you creating a recursive loop where Sub Graphs try to call themselves).</p>
<p>Similar to other graphs, the <strong>path</strong> can be adjusted in the <strong>Blackboard</strong>, which determines how it appears in the <strong>Create Node</strong> menu. Use slashes to create sub-headings. See the <a href="#path">Path</a> section above for more information.</p>
<p>There is two ways to create a <strong>Sub Graph</strong> :</p>
<ul>
<li><strong>Create → Shader</strong> menu. This creates a blank Sub Graph with defaults to a single <strong>Vector4</strong> output, but this can be changed. See next section.</li>
<li><strong>Convert To Sub Graph</strong> : In any graph, you can drag a selection over some nodes, right-click one of the selected nodes, and convert to a <strong>Sub Graph</strong> (<strong>Convert To → Sub-graph</strong>). This will put the selected content into a new Sub Graph and should automatically create inputs/outputs and retain their connections. Note it only creates inputs if a connection from a non-selected node is going into one of the selected nodes.</li>
</ul>
<div class="img-center">
<a href="ConvertToSubGraph.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="512" height="373" alt="(Image)" src="ConvertToSubGraph.png" />
</a>
<p class="img-text"></p>
</div>
<h3 id="sub-graph-outputs">Outputs</h3>
<p>In v10+ we can adjust the number of outputs and change their data types by selecting the <b class="node">Output</b> node (left-click on it). A list will appear in the <strong>Node Settings</strong> tab of the <strong>Graph Inspector</strong> window, (It&rsquo;s incorrectly labelled as &ldquo;Inputs&rdquo;, in v12 at least, but this might be fixed in the future).</p>
<p>Prior to v10 a cog/gear could be found on the <b class="node">Output</b> node to adjust these instead.</p>
<div class="img-center">
<a href="SubGraphOutputs.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="556" height="225" alt="(Image)" src="SubGraphOutputs.png" />
</a>
<p class="img-text"></p>
</div>
<p>The first output is used to create the node&rsquo;s Preview. It must be a <strong>Float</strong>, <strong>Vector</strong>, <strong>Matrix</strong>, or <strong>Boolean</strong> type or the <strong>Sub Graph</strong> will error. Other outputs can be any type from the dropdown (though Virtual Texture appears to not be supported and is greyed out).</p>
<p>(You may also see some other &ldquo;Bare&rdquo; texture types if in v10.3+ but they&rsquo;ll be greyed out. They are only used if a <strong>Sub Graph</strong> was using those texture types prior to updating. See the <a href="#better-texture-data-types">Better Texture Data Types</a> section for more information on why this change was made).</p>
<h3 id="sub-graph-inputs">Inputs</h3>
<p>It&rsquo;s also possible to create <strong>Inputs</strong> for the <strong>Sub Graph</strong>, which uses <strong>Properties</strong> that can be created from the <strong>Blackboard</strong>. See the <a href="#properties">Properties</a> section above for more information. Note however that some settings (like modes) will be hidden.</p>
<p>These inputs will always show as ports when the <strong>Sub Graph</strong> is added to another graph as a <strong>node</strong> and cannot be exposed to the <strong>Material Inspector</strong>.</p>
<h3 id="sub-graph-branch">Branch On Input Connection</h3>
<p>A pretty neat feature added in <strong>v12+</strong> (Unity <strong>2021.2+</strong>) is the <b class="node">Branch On Input Connection</b> node, which is available for Sub Graphs. It&rsquo;s purpose is to allow you to create a Branch (graph selects between two options) based on whether a node is connected to the Input port when the subgraph is used.</p>
<p>To use this, we first need to enable the <strong>Use Custom Binding</strong> option on the Input, which is found in the <strong>Node Settings</strong> tab of the <strong>Graph Inspector</strong> window when the Input is selected.</p>
<p>When ticked, a text field for a <strong>Label</strong> appears. This will be the text that appears next to the port when nothing is connected to the <b class="node">Sub Graph</b> node (Similar to how &ldquo;AbsoluteWorld Space&rdquo; and &ldquo;World Space&rdquo; appear on the <strong>Position</strong> and <strong>Normal</strong> ports on the <b class="node">Triplanar</b> node).</p>
<div class="img-center">
<a href="UseCustomBinding.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="615" height="302" alt="(Image)" src="UseCustomBinding.png" />
</a>
<p class="img-text"></p>
</div>
<p>In the Sub Graph, we can then add the <b class="node">Branch On Input Connection</b> node and connect our Input to the <strong>Input</strong> port, as well as the <strong>Connected</strong> port as we want to use it&rsquo;s value.</p>
<div class="img-center">
<a href="BranchOnInputConnection.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="743" height="328" alt="(Image)" src="BranchOnInputConnection.png" />
</a>
<p class="img-text"></p>
</div>
<p>In this example I&rsquo;m using the <b class="node">Normal Vector</b> node (mesh normal) for a custom lighting calculation. By using the <b class="node">Branch On Input Connection</b> it allows us to optionally connect a Vector3, allowing for this custom lighting to support normal maps.</p>
<p>Having this in our Sub Graph is much better than not providing support for normal maps, or having to expose a regular Vector3 port and making the user connect a <b class="node">Normal Vector</b> node (or normal map transformed into World space) for it to function correctly.</p>
<div class="img-center">
<a href="BranchOnInputConnectionExample.gif" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="335" alt="(Image)" src="BranchOnInputConnectionExample.gif" />
</a>
<p class="img-text"></p>
</div>
<p>In this case I haven&rsquo;t got a proper normal map so instead of using a <b class="node">Sample Texture 2D</b> node with <strong>Normal</strong> mode, I&rsquo;m using the <b class="node">Normal From Texture</b> node which converts a height map into a normal map by using 3 texture samples (though may be less accurate). See <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@12.1/manual/Normal-From-Texture-Node.html">Normal From Texture docs page</a> for more info.</p>
<hr>
<h2 id="fragment-only-nodes">Fragment-Only Nodes</h2>
<p>Some features of shaders are limited to the <strong>Fragment</strong> shader stage :</p>
<ul>
<li>Screen-space Partial Derivatives (<b class="node">DDX</b>, <b class="node">DDY</b>, <b class="node">DDXY</b>) : What these do is a bit complicated so not going into a lot of detail. In short, GPUs run the fragment shader in 2x2 pixel blocks, so can compare values with neighbouring pixels horizontally (ddx) and vertically (ddy). The values are subtracted giving what is apparently called a partial derivative.
<ul>
<li>DDXY, also known as <code>fwidth</code> in shader code, is equal to <code>abs(ddx) + abs(ddy)</code></li>
<li>Some uses of these are mentioned below (mipmaps, local anti-aliasing)</li>
</ul>
</li>
<li><b class="node">Is Front Face</b> : Is true if the fragment is on the front side of the face. False if on the back side of the face. Only important if <strong>Two Sided</strong> is enabled.</li>
</ul>
<p>Connecting these to the <strong>Vertex</strong> stage is not possible. Quite a few nodes also make use of these partial derivatives so also can only be used in the <strong>Fragment</strong> stage. For example :</p>
<ul>
<li><b class="node">Sample Texture 2D</b> : Uses partial derivatives in order to calculate which mipmap level should be used.
<ul>
<li>If you need to sample a texture in the <strong>Vertex</strong> stage, you should use a <b class="node">Sample Texture 2D LOD</b> instead so you can specify which mipmap is used yourself, usually level 0.</li>
<li>In code, this would be SAMPLE_TEXTURE_2D(texture, sampler, uv, lod)`</li>
</ul>
</li>
<li><b class="node">Sample Texture 2D Array</b> : Same as the above, However a LOD verison of the node isn&rsquo;t provided. Instead use a <b class="node">Custom Function</b> with :
<ul>
<li><code>SAMPLE_TEXTURE2D_ARRAY_LOD(texture, sampler, uv, index, lod)</code></li>
</ul>
</li>
<li><b class="node">Sample Texture 3D</b> : Use a <b class="node">Custom Function</b> with :
<ul>
<li><code>SAMPLE_TEXTURE3D_LOD(texture, sampler, uvw, lod)</code></li>
</ul>
</li>
<li><b class="node">Normal From Height</b> : Calculates a normal based on a Float input. Can only be used in the Fragment <strong>Normal</strong> input (Tangent or World space), as it makes use of ddx/ddy.</li>
<li>Procedural Shapes (e.g. <b class="node">Ellipse</b>, <b class="node">Rectangle</b>, <b class="node">Polygon</b>, <b class="node">Rounded Rectangle</b>, <b class="node">Rounded Polgyon</b>) : All make use of <code>fwidth</code> (aka <b class="node">DDXY</b>) for local anti-aliasing. See their documentation pages to see the code used. Using a <b class="node">Custom Function</b> with the <code>fwidth</code> removed would allow it to function in the vertex stage. Use a <b class="node">Step</b> (or <b class="node">Smoothstep</b>) node to convert the distance field to the shape itself.</li>
<li><b class="node">Checkerboard</b> : Has local anti-aliasing applied using ddx/ddy. Not sure why you&rsquo;d need this in vertex stage anyway though.</li>
</ul>
<p>The following nodes also use 2D texture samples. It may be possible to create alternatives to these that use the Sample 2D LOD version instead.</p>
<ul>
<li>
<p><b class="node">Triplanar</b> : Typically isn&rsquo;t used per-vertex, but if needed, you would have to create your own Triplanar setup, with <b class="node">Sample Texture 2D LOD</b> nodes instead.</p>
<ul>
<li>If you want to create this in graph form, a Colour/Albedo version can be found <a href="https://cyangamedev.wordpress.com/2020/01/28/worldspace-uvs-triplanar-mapping/">here</a>.</li>
<li>Alternatively, use a <b class="node">Custom Function</b>. You can find the code used by the Triplanar node <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@10.3/manual/Triplanar-Node.html">here</a>, swap the sample out for <code>SAMPLE_TEXTURE2D_LOD(texture, sampler, uv, lod)</code></li>
</ul>
</li>
<li>
<p><b class="node">Normal From Texture</b> : Calculates a normal based on a greyscale texture. Can find the code used for the node <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@10.3/manual/Normal-From-Texture-Node.html">here</a>.</p>
<ul>
<li>Note : Not to be confused with sampling a bump/normal texture, which can be done using the <b class="node">Sample Texture 2D</b> node with the <strong>Normal mode</strong>. You wouldn&rsquo;t usually sample a normal texture per-vertex, but that could be done with the LOD version of the node too.</li>
</ul>
</li>
<li>
<b class="node">Scene Color</b>
</li>
<li>
<b class="node">Scene Depth</b>
<ul>
<li>For URP, see <a href="https://github.com/Unity-Technologies/Graphics/blob/master/Packages/com.unity.render-pipelines.universal/ShaderLibrary/DeclareDepthTexture.hlsl">here</a>. It uses regular texture sampling while vertex stage would need to use a LOD version :</li>
</ul>
<button id="scene-depth-lod" type="button" class="foldout_button" onclick="
    this.classList.toggle('active');
    var content = this.nextElementSibling;
    if (content.style.display === 'block') {
      content.style.display = 'none';
      this.innerHTML = '<b>⯈ Scene Depth LOD Custom Function (URP)</b>';
    } else {
      content.style.display = 'block';
      this.innerHTML = '<b>⯆ Scene Depth LOD Custom Function (URP)</b>';

      if (history.pushState) {
        var newurl = window.location.protocol + '//' + window.location.host + window.location.pathname;
        newurl = newurl + '#scene-depth-lod';
        window.history.pushState({path:newurl}, '', newurl);
      }

    }
"><b>⯈ Scene Depth LOD Custom Function (URP)</b></button>
<div class="foldout">
<ul>
<li>Inputs :
<ul>
<li>&ldquo;ScreenPosition&rdquo; (Vector2)</li>
</ul>
</li>
<li>Outputs
<ul>
<li>&ldquo;Out&rdquo; (Float)</li>
</ul>
</li>
<li>Type : File</li>
<li>Function Name : &ldquo;SceneDepthLOD&rdquo;</li>
</ul>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#ifndef SCENEDEPTH_LOD
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define SCENEDEPTH_LOD
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#ifndef SHADERGRAPH_PREVIEW
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;Packages/com.unity.render-pipelines.universal/ShaderLibrary/DeclareDepthTexture.hlsl&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#endif
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">SceneDepthLOD_float</span>(float2 ScreenPosition, out <span style="color:#66d9ef">float</span> LinearDepth)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#75715e">#ifdef SHADERGRAPH_PREVIEW
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>LinearDepth <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//EyeDepth = 0;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#else
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">float</span> RawDepth <span style="color:#f92672">=</span> SAMPLE_TEXTURE2D_X_LOD(_CameraDepthTexture, sampler_CameraDepthTexture, UnityStereoTransformScreenSpaceTex(ScreenPosition), <span style="color:#ae81ff">0</span>).r;
</span></span><span style="display:flex;"><span>LinearDepth <span style="color:#f92672">=</span> Linear01Depth(RawDepth, _ZBufferParams);
</span></span><span style="display:flex;"><span><span style="color:#75715e">//EyeDepth = LinearEyeDepth(RawDepth, _ZBufferParams);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#endif
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#endif </span><span style="color:#75715e">// SCENEDEPTH_LOD
</span></span></span></code></pre></td></tr></table>
</div>
</div>

</div>

<ul>
<li>Untested but for Built-in RP, I&rsquo;d maybe try the same as the above function but without the <code>#include</code> and define the texture yourself (i.e. <code>TEXTURE2D_X_FLOAT(_CameraDepthTexture); SAMPLER(sampler_CameraDepthTexture);</code>) or via the Blackboard as Texture2D property with Exposed unticked / Global scope.</li>
<li>For HDRP, <code>SampleCameraDepth(float2 uv)</code> in <a href="https://github.com/Unity-Technologies/Graphics/blob/master/Packages/com.unity.render-pipelines.high-definition/Runtime/ShaderLibrary/ShaderVariables.hlsl">ShaderVariables.hlsl</a> actually already uses an LOD version, you may still need to handle it in a <b class="node">Custom Function</b> though.</li>
</ul>
</li>
<li>
<p><b class="node">Parallax Mapping</b> (v10.1+) : Uses texture sample, but would only ever be used in the fragment stage.</p>
</li>
<li>
<p><b class="node">Parallax Occlusion Mapping</b> (v10.1+) : Technically I don&rsquo;t think this node uses anything that would prevent it working in the vertex stage, but it would only ever be used in the fragment stage so is still limited to fragment-only.</p>
</li>
</ul>
<p>Note, that when working with <strong>Sub Graphs</strong>, if one of these Fragment-only nodes is used, <strong>all it&rsquo;s outputs cannot be connected to the Vertex stage</strong>. The shader won&rsquo;t break if connections were made previously to converting it to a Sub Graph, but if un-connected, it won&rsquo;t be possible to reconnect them without editing the Sub Graph. I recommend keeping all Vertex vs Fragment parts in completely separate Sub Graphs to avoid these issues.</p>
<p>If somehow you manage to create a connection to a Vertex port including a Fragment-only node, it will result in a shader error similar to <code>cannot map expression to vs_5_0 instruction set</code>.</p>
<hr>
<h2 id="advanced">Advanced</h2>
<p>This final section includes some additional features of Shader Graph that I&rsquo;d consider to be more advanced.</p>
<p>(I would have put some of the content in the <a href="#gradient">Gradient</a> &amp; <a href="#array">Array</a> sections here instead, as that was also more advanced than I wanted the post to be, but felt it fits better to keep that under the <a href="#data-types">Data Types</a> section/heading)</p>
<p>Learning stuff below might not be necessary to get started, but may be useful to come back to! If you stop reading here, thanks for reading! Please consider sharing a link to others if you found this useful! &lt;3</p>

<div class="footer-btns">

<a href="https://ko-fi.com/cyanilux" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
<div class="footer-btn btn-kofi">
<img class="img" src="https://www.cyanilux.com/logo-kofi.png" alt="Ko-fi" style="width:22px; padding-right:5px">
Support me on Ko-fi! ✨
</img>
</div>
</a>

<a href="http://discord.gg/2V93q9w" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
<div class="footer-btn btn-discord">
<img class="img" src="https://www.cyanilux.com/logo-discord-2.png" alt="Discord" style="width:22px; padding-right:5px">
Join my discord! 💬
</img>
</div>
</a>

</div>
<h3 id="custom-interpolators">Custom Interpolators</h3>
<p>The Vertex stage is responsible for passing through any data (e.g. from the mesh) that may be needed in Fragment stage calculations. This is known as <strong>interpolators</strong> (as this data for each vertex is interpolated across the triangle). It is mostly handled automatically by Shader Graph - e.g. For nodes requiring UVs, the <b class="node">Position</b> node, <b class="node">Normal Vector</b> and other nodes in the <strong>Input → Geometry</strong> heading under the Create Node menu.</p>
<p>But in some cases we may also want to pass our own custom data between the two stages. In Shader Graph <strong>v12</strong> (Unity <strong>2021.2+</strong>), we can do this by adding <strong>Custom Interpolator</strong> blocks to the <strong>Vertex</strong> stage (by right-clicking, then selecting <strong>Add Block Node</strong>). There is a <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@14.0/manual/Custom-Interpolators.html">docs page here</a> for this, but below also explains how to use it and some usage examples.</p>
<div class="img-center">
<a href="CustomInterpolator1.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="238" alt="(Image)" src="CustomInterpolator1.png" />
</a>
<p class="img-text"></p>
</div>
<p>We can then change the name and type in the <strong>Node Settings</strong> tab of the <strong>Graph Inspector</strong> window while the block is selected.
<div class="img-center">
<a href="CustomInterpolator2.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="208" alt="(Image)" src="CustomInterpolator2.png" />
</a>
<p class="img-text"></p>
</div></p>
<p>You can have multiple interpolators. The maximum is 32, though the actual amount you can use will depend on the target platform (I believe gles platforms may be limited to 8, as they use the SubShader with target 2.0, even though gles3 can actually support more). The <a href="https://docs.unity3d.com/Manual/SL-ShaderCompileTargets.html">Shader Compile Targets</a> docs page has some related info.</p>
<p>Also note that :</p>
<ul>
<li>As mentioned above, some interpolators will be taken up when using nodes that require the data in the fragment stage (nodes under <strong>Input → Geometry</strong> in Create Node menu)</li>
<li>Interpolators can be up to <code>float4</code>, and in the actual generated shader code it will try to pack multiple together to fit that (e.g. a Vector3 and Float, or two Vector2s), so counting the blocks won&rsquo;t necessarily be accurate to the interpolator count used. It is better to check the <code>PackedVaryings</code> struct in the <a href="#generated-shader-code">generated code</a>.</li>
</ul>
<p>Some uses of Custom Interpolators :</p>
<ul>
<li>Meshes tend to have less vertices than fragments produced, so doing calculations in the vertex shader can be much cheaper, (but may not look as accurate).
<ul>
<li><a href="https://en.wikipedia.org/wiki/Gouraud_shading">Gouraud shading</a> for example, is when lighting models (e.g. Phong) are calculated per-vertex but this can result in geometry being fairly obvious (especially when low-poly).</li>
</ul>
</li>
<li>Obtaining the interpolated vertex position (<b class="node">Position</b> node), or <b class="node">Screen Position</b>, before vertex displacement (see below for examples)</li>
<li>To pass something based on <b class="node">Vertex ID</b> node to the fragment (e.g. see <code>SV_VertexID</code> example on the <a href="https://docs.unity3d.com/Manual/SL-ShaderSemantics.html">SL-ShaderSemantics docs page</a>.</li>
</ul>
<h4 id="custom-interpolators-example-1">Custom Interpolators Example 1 - Undisplaced Position</h4>
<p>When using the <b class="node">Position</b> node in the <strong>Fragment</strong> stage, it will always have any vertex displacement applied (from calculation passed into the <strong>Position</strong> port on the <strong>Vertex</strong> stage). As an example, here we can use a <strong>Custom Interpolator</strong> block to pass the un-displaced position through.</p>
<div class="img-center">
<a href="CustomInterpolator3.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="285" alt="(Image)" src="CustomInterpolator3.png" />
</a>
<p class="img-text"></p>
</div>
<p>In the fragment we can create the interpolator node (found under <strong>Create Node → Custom Interpolator</strong>)</p>
<p>Now compare our interpolator with the regular <b class="node">Position</b> node in the <strong>Fragment</strong> stage (can use the <strong>Main Preview</strong> for this. Can right-click in that window to swap the mesh for a <strong>Plane</strong>). The <strong>Y</strong> axis of the interpolator produces a completely black result (as the vertex positions are at <strong>Y=0</strong>). But with the <b class="node">Position</b> node version, we can see a gradient (specifically from <strong>-1 to 1</strong>, though the negative values also show as black here).
<div class="img-center">
<a href="CustomInterpolator4.gif" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="689" height="457" alt="(Image)" src="CustomInterpolator4.gif" />
</a>
<p class="img-text"></p>
</div></p>
<p>Of course, you&rsquo;d only do this if the black result is what you required. I used this recently, <a href="https://twitter.com/Cyanilux/status/1546404927978741760">to colour an fried egg shader</a>. As the egg yolk has higher vertices and I <em>(somewhat lazily)</em> used a <b class="node">Step</b> node (then into a <b class="node">Lerp</b>) rather than applying a texture or vertex colors. But this required the undisplaced position otherwise other parts of the egg would appear yellow too as it displaces upwards.</p>
<h4 id="custom-interpolators-example-2">Custom Interpolators Example 2 - Vertex Based Distortion</h4>
<p>Perhaps you&rsquo;d also use this if you are applying a texture by using a projection via <b class="node">Position</b> node (usually known as worldspace planar mapping, somewhat of a precursor to triplanar mapping). If we want the texture to distort as the vertices move rather than stay static, then we need to handle the mapping with the position prior to the distortion. Here&rsquo;s an example using <b class="node">Gradient Noise</b> for displacement (on all XYZ axis) :</p>
<div class="img-center">
<a href="CustomInterpolator5.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="280" alt="(Image)" src="CustomInterpolator5.png" />
</a>
<p class="img-text"></p>
</div>
<p>And then <strong>Fragment</strong>, comparing the result with the <strong>Main Preview</strong> (with <strong>Plane</strong> mesh) :</p>
<div class="img-center">
<a href="CustomInterpolator6.gif" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="262" alt="(Image)" src="CustomInterpolator6.gif" />
</a>
<p class="img-text"></p>
</div>
<p>We could also do the same thing but with the <b class="node">Screen Position</b> node instead for a screenspace mapping.</p>
<p>As mentioned previously, this is likely cheaper than a per-pixel approach to distortion (which is essentially the same calculation but all in the Fragment stage), but it definitely doesn&rsquo;t look as accurate and would likely only fit in a old-PS1 style (or similar platforms around that time) or low-poly style (though this plane may need to be fairly high-poly still).</p>
<hr>
<h3 id="custom-functions">Custom Functions</h3>
<p>Shader Graph is a powerful tool, but the nodes can&rsquo;t do everything. Some things might require <em>code snippets</em> to be used instead, which is where the <b class="node">Custom Function</b> node would be used. For example for creating <strong>loops</strong>, <strong>dynamic branching</strong>, or complex math calculations (which may be possible through nodes, but can be easier/shorter in code form)</p>
<p>Back in Unity 2018.1, there was a method of creating custom nodes using the <code>CodeFunctionNode</code> class in the <code>UnityEditor.ShaderGraph</code> namespace. This method is <strong>no longer accessible</strong> and will error if you attempt to use CodeFunctionNode in Shader Graph/URP/HDRP versions for Unity 2019.1+. The replacement was the in-graph node.</p>
<p>The <b class="node">Custom Function</b> node can be added to a graph, and then configured under the <strong>Node Settings</strong> tab of the <strong>Graph Inspector</strong> window, while the node is selected in the graph. (Prior to v10 the settings could be accessed by the small cog/gear icon on the node itself)</p>
<div class="img-center">
<a href="CustomFunctionExample.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="750" height="339" alt="(Image)" src="CustomFunctionExample.png" />
</a>
<p class="img-text"></p>
</div>
<p>We can set the <strong>Inputs</strong> and <strong>Outputs</strong> for the function by using the &ldquo;+&rdquo; icon to add to the list. For each item, a dropdown is shown to change it&rsquo;s data type. This affects the ports on the node.</p>
<p>There is two <strong>Types</strong> for the node :</p>
<ul>
<li><strong>String</strong> : We can write HLSL code directly in the <strong>Body</strong> field that appears. For example, with two inputs A and B :</li>
</ul>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>Out <span style="color:#f92672">=</span> A <span style="color:#f92672">+</span> B;</span></span></code></pre></td></tr></table>
</div>
</div>
<p>The <strong>Name</strong> of the function isn&rsquo;t too important if using the <strong>String</strong> mode but they must be unique or the function may override another.</p>
<ul>
<li><strong>File</strong> : We can use an external .hlsl (or .cginc) file and set the node to use it with the <strong>Source</strong> field that appears. The file should use a specific template as explained in the <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@17.0/manual/Custom-Function-Node.html">shader graph docs</a> and example below.</li>
</ul>
<p>Typically the whole file contents are inside an <code>#ifndef KEYWORD</code> <code>#define KEYWORD</code> &hellip; <code>#endif</code> block, which ensures the functions are only defined <strong>once</strong> - even if the file is included multiple times, which may occur if two <b class="node">Custom Function</b> nodes reference the same HLSL File. The keyword used should be <em>unique</em> to that file. If two files have the same keyword, the contents of one won&rsquo;t be included (likely causing an undefined error)</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#ifndef MYHLSLINCLUDE_INCLUDED
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define MYHLSLINCLUDE_INCLUDED
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// The function name &#34;MyFunction&#34; will be the Name used in the Custom Function node.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// The _float suffix is used to support the Float/Single precision.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">MyFunction_float</span>(float3 A, <span style="color:#66d9ef">float</span> B, out float3 Out) {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// A is a Vector3 input, which in code is float3 (or half3 if using Half precision)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// B is a Float/Vector1 input, which in code is float (or half)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// Outputs use the &#34;out&#34; term in the function arguments/parameters.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    Out <span style="color:#f92672">=</span> A <span style="color:#f92672">+</span> B;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// If we need to support the half precision too,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// we can define the same function but with the _half suffix.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">MyFunction_half</span>(half3 A, half B, out half3 Out) {
</span></span><span style="display:flex;"><span>    Out <span style="color:#f92672">=</span> A <span style="color:#f92672">+</span> B;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#endif </span><span style="color:#75715e">// ends the MYHLSLINCLUDE_INCLUDED check at the beginning of the file.
</span></span></span></code></pre></td></tr></table>
</div>
</div>
<p>As shown above, the <strong>Name</strong> field must match the name of the function you want to use without the precision prefix (<code>MyFunction</code> in this case). A file can contain multiple functions - the <b class="node">Custom Function</b> node will only use the one with the name you set.</p>
<h4 id="ifdef-shadergraph-preview">Calling ShaderLibrary Functions in a Custom Function</h4>
<p>There may be cases where you need to access functions from the URP/HDRP ShaderLibrary in your code. Some common macros may be defined for pipelines. For example, sampling a texture :</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#ifndef SAMPLE_TEXTURE_EXAMPLE_INCLUDED
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define SAMPLE_TEXTURE_EXAMPLE_INCLUDED
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">ExampleSampleTexture2D_float</span>(UnityTexture2D Texture, float2 UV, out float4 Out){
</span></span><span style="display:flex;"><span>   Out <span style="color:#f92672">=</span> SAMPLE_TEXTURE2D(Texture, Texture.samplerstate, UV);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#endif</span></span></span></code></pre></td></tr></table>
</div>
</div>
<p>But other more pipeline-specific macros/functions require special care. Previews within shader graph need to render in any render pipeline, so they use their own separate ShaderLibrary which won&rsquo;t have access to URP/HDRP specific functions.</p>
<p>It&rsquo;s typical to use the <code>SHADERGRAPH_PREVIEW</code> keyword to output something different for previews, especially when they wouldn&rsquo;t be useful anyway. For example this function from my <a href="https://github.com/Cyanilux/URP_ShaderGraphCustomLighting">Custom Lighting Package</a>, obtains Directional Light info in URP :</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">MainLight_float</span> (out float3 Direction, out float3 Color, out <span style="color:#66d9ef">float</span> DistanceAtten){
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">#ifdef SHADERGRAPH_PREVIEW
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		Direction <span style="color:#f92672">=</span> normalize(float3(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#f92672">-</span><span style="color:#ae81ff">0.4</span>));
</span></span><span style="display:flex;"><span>		Color <span style="color:#f92672">=</span> float4(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>		DistanceAtten <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">#else
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		Light mainLight <span style="color:#f92672">=</span> GetMainLight();
</span></span><span style="display:flex;"><span>		Direction <span style="color:#f92672">=</span> mainLight.direction;
</span></span><span style="display:flex;"><span>		Color <span style="color:#f92672">=</span> mainLight.color;
</span></span><span style="display:flex;"><span>		DistanceAtten <span style="color:#f92672">=</span> mainLight.distanceAttenuation;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">#endif
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}</span></span></code></pre></td></tr></table>
</div>
</div>
<p><code>GetMainLight()</code> here is a function that exists only in the URP ShaderLibrary. That is fine for the final generated shader, but as explained above, previews do not have access to it. You might think of adding <code>#include</code> lines for Lighting.hlsl or RealtimeLights.hlsl so the function can be used, but those files contain other includes such as URP&rsquo;s <a href="https://github.com/Unity-Technologies/Graphics/blob/master/Packages/com.unity.render-pipelines.universal/ShaderLibrary/UnityInput.hlsl">UnityInput.hlsl</a> which defines variables like <code>_Time</code>. That already exists under the ShaderGraphLibrary used by previews, hence redefiniton errors are caused and the <code>SHADERGRAPH_PREVIEW</code> block must be used instead.</p>
<h4 id="better-texture-data-types">Sampling Textures in a Custom Function</h4>
<p>In shader code online you might typically see <code>sampler2D</code> and <code>tex2D()</code> functions being used. This is the older DX9 syntax, but with Shader Graph we mostly use the newer DX11+ syntax which has <a href="https://docs.unity3d.com/Manual/SL-SamplerStates.html">separate objects for the texture and sampler</a>. This isn&rsquo;t supported in all platforms though (GLES2), so Unity provides a bunch of <strong>macros</strong> which can generate different code. These macros are defined in files found under <a href="https://github.com/Unity-Technologies/Graphics/tree/master/Packages/com.unity.render-pipelines.core/ShaderLibrary/API">render-pipelines.core/ShaderLibrary/API</a>. The foldout below also lists some.</p>
<button  type="button" class="foldout_button" onclick="
    this.classList.toggle('active');
    var content = this.nextElementSibling;
    if (content.style.display === 'block') {
      content.style.display = 'none';
      this.innerHTML = '<b>⯈ Texture Sampling Macros</b>';
    } else {
      content.style.display = 'block';
      this.innerHTML = '<b>⯆ Texture Sampling Macros</b>';

    }
"><b>⯈ Texture Sampling Macros</b></button>
<div class="foldout">
<p>Common macros for sampling textures :</p>
<ul>
<li>
<p>Sample : Can be used in Fragment stage only</p>
<ul>
<li><code>SAMPLE_TEXTURE2D(textureName, samplerName, coord2)</code></li>
<li><code>SAMPLE_TEXTURECUBE(textureName, samplerName, coord3)</code></li>
<li><code>SAMPLE_TEXTURE3D(textureName, samplerName, coord3)</code></li>
<li><code>SAMPLE_TEXTURE2D_ARRAY(textureName, samplerName, coord2, index)</code></li>
<li><code>SAMPLE_TEXTURECUBE_ARRAY(textureName, samplerName, coord3, index)</code></li>
<li>These macros would end up using <a href="https://learn.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-to-sample">tex.Sample(&hellip;)</a> (on DX11+ type platforms)</li>
</ul>
</li>
<li>
<p>Sample Level (of Detail) : Provides lod input to specify the mip map level sampled. Can be used in both Vertex &amp; Fragment stages</p>
<ul>
<li><code>SAMPLE_TEXTURE2D_LOD(textureName, samplerName, coord2, lod)</code></li>
<li><code>SAMPLE_TEXTURECUBE_LOD(textureName, samplerName, coord3, lod)</code></li>
<li><code>SAMPLE_TEXTURE3D_LOD(textureName, samplerName, coord3, lod)</code></li>
<li><code>SAMPLE_TEXTURE2D_ARRAY_LOD(textureName, samplerName, coord2, index, lod)</code></li>
<li><code>SAMPLE_TEXTURECUBE_ARRAY_LOD(textureName, samplerName, coord3, index, lod)</code></li>
<li>These macros would end up using <a href="https://learn.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-to-samplelevel">tex.SampleLevel(&hellip;)</a> (on DX11+ type platforms)</li>
</ul>
</li>
<li>
<p>Sample Bias : Provides a bias to adjust the mip map level. Can be used in Fragment stage only.</p>
<ul>
<li><code>SAMPLE_TEXTURE2D_BIAS(textureName, samplerName, coord2, bias)</code></li>
<li><code>SAMPLE_TEXTURECUBE_BIAS(textureName, samplerName, coord3, bias)</code></li>
<li><code>SAMPLE_TEXTURE2D_ARRAY_BIAS(textureName, samplerName, coord2, index, bias)</code></li>
<li><code>SAMPLE_TEXTURECUBE_ARRAY_BIAS(textureName, samplerName, coord3, index, bias)</code></li>
<li>Doesn&rsquo;t seem to be BIAS macros for Texture3D. May be able to use <a href="https://learn.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-to-samplebias">tex.SampleBias(&hellip;)</a> function still (or <a href="https://learn.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-tex3dbias">tex3Dbias</a> for GLES2) ?</li>
</ul>
</li>
<li>
<p>Sample Gradient : Provides inputs for partial derivatives. Can be used in both Vertex &amp; Fragment stages. (Unless you use <code>ddx()</code>/<code>ddy()</code> functions to calculate those derivatives - as those are Fragment only). These are useful when the UV coords used for sampling aren&rsquo;t continuous, see <a href="#sg-pixellated-seams">Pixellation along seams question above</a>.</p>
<ul>
<li><code>SAMPLE_TEXTURE2D_GRAD(textureName, samplerName, coord2, dpdx, dpdy)</code></li>
<li><code>SAMPLE_TEXTURE2D_ARRAY_GRAD(textureName, samplerName, coord2, index, dpdx, dpdy)</code></li>
<li>Doesn&rsquo;t seem there is GRAD macros for other texture types. May be able to use <a href="https://learn.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-to-samplegrad">tex.SampleGrad(&hellip;)</a> function still (or <a href="https://learn.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-texcubegrad">texCUBEgrad</a>/<a href="https://learn.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-tex3dgrad">tex3Dgrad</a> for GLES2) ?</li>
</ul>
</li>
</ul>

</div>

<p>In Shader Graph v10.3+ the following structs were added, mirroring the HLSL types :</p>
<ul>
<li><strong>UnityTexture2D</strong></li>
<li><strong>UnityTexture2DArray</strong></li>
<li><strong>UnityTexture3D</strong></li>
<li><strong>UnityTextureCube</strong></li>
<li><strong>UnitySamplerState</strong></li>
</ul>
<p>These structs (defined in <a href="https://github.com/Unity-Technologies/Graphics/blob/master/Packages/com.unity.render-pipelines.core/ShaderLibrary/Texture.hlsl">pipelines.core/ShaderLibrary/Texture.hlsl</a>) wrap the HLSL texture objects (<code>Texture2D, Texture2DArray, Texture3D, TextureCube</code>) and their associated samplers (<code>SamplerState</code>) together, allowing them to both be passed into a <b class="node">Custom Function</b> node in a single parameter.</p>
<p>Some examples :</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">SampleTexture2D_float</span>(UnityTexture2D Texture, float2 UV, out float4 Out){
</span></span><span style="display:flex;"><span>   Out <span style="color:#f92672">=</span> SAMPLE_TEXTURE2D(Texture, Texture.samplerstate, UV);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">SampleTexture2DLOD_float</span>(UnityTexture2D Texture, float2 UV, <span style="color:#66d9ef">float</span> LOD, out float4 Out){
</span></span><span style="display:flex;"><span>   Out <span style="color:#f92672">=</span> SAMPLE_TEXTURE2D_LOD(Texture, Texture.samplerstate, UV, LOD);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></td></tr></table>
</div>
</div>
<p>Thanks to these types, it&rsquo;s possible to access the <strong>SamplerState</strong> used by the texture through <code>.samplerstate</code> (as shown above), as well as the <strong>TexelSize</strong> through <code>.texelSize</code> (That one is UnityTexture2D only though). The actual texture object is accessed via <code>.tex</code> but sampling macros can be used with new struct types too.</p>
<p>Custom Function nodes created prior to this change will set their inputs/outputs as the &ldquo;Bare&rdquo; types when updated. This allows the function to still work as it was originally intended, but switching them to &ldquo;non-Bare&rdquo; allows you to use the new samplerstate/texelsize access.</p>
<button id="sg-custom-function-textures-old" type="button" class="foldout_button" onclick="
    this.classList.toggle('active');
    var content = this.nextElementSibling;
    if (content.style.display === 'block') {
      content.style.display = 'none';
      this.innerHTML = '<b>⯈ Pre-v10 examples</b>';
    } else {
      content.style.display = 'block';
      this.innerHTML = '<b>⯆ Pre-v10 examples</b>';

      if (history.pushState) {
        var newurl = window.location.protocol + '//' + window.location.host + window.location.pathname;
        newurl = newurl + '#sg-custom-function-textures-old';
        window.history.pushState({path:newurl}, '', newurl);
      }

    }
"><b>⯈ Pre-v10 examples</b></button>
<div class="foldout">
<p>In case you are still on older versions or using Bare types, the above functions would instead typically look like this. Where a <b class="node">Sampler State</b> node would have to be used.</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">OldExample_float</span>(Texture2D Tex, SamplerState SS, float2 UV, out float4 Out){
</span></span><span style="display:flex;"><span>   Out <span style="color:#f92672">=</span> SAMPLE_TEXTURE2D(Tex, SS, UV);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">OldLODExample_float</span>(Texture2D Tex, SamplerState SS, float3 UV, out float4 Out){
</span></span><span style="display:flex;"><span>    Out <span style="color:#f92672">=</span> SAMPLE_TEXTURE2D_LOD(Tex, SS, UV, <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>}</span></span></code></pre></td></tr></table>
</div>
</div>

</div>

<h4 id="arrays">Arrays &amp; Loops</h4>
<p>While not a type exposed in Shader Graph, shaders also have array types and it is possible to define them in a <b class="node">Custom Function</b></p>
<p>Defining arrays can only be done with the <strong>File</strong> mode, as it needs to be outside the scope of the function itself. Arrays can also only be set from C# and won&rsquo;t appear in the material inspector.</p>
<p>For example :</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span>float4 _VectorArray[<span style="color:#ae81ff">10</span>]; <span style="color:#75715e">// Vector array</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">float</span> _FloatArray[<span style="color:#ae81ff">10</span>]; <span style="color:#75715e">// Float array</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> ArrayExample_float(<span style="color:#66d9ef">out</span> <span style="color:#66d9ef">float</span> Out){
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">float</span> <span style="color:#66d9ef">add</span> = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">	[unroll]</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i = <span style="color:#ae81ff">0</span>; i &lt; <span style="color:#ae81ff">10</span>; i++){
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">add</span> += _FloatArray[i];
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	Out = <span style="color:#66d9ef">add</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></td></tr></table>
</div>
</div>
<p>In the above example, a loop has been used to sum the values. Typically you&rsquo;ll need a loop inside the function in order to handle the array (unless you just need a single value at a given index). Another example can be found in my <a href="https://www.cyanilux.com/tutorials/forcefield-shader-breakdown/">Forcefield Shader Breakdown</a> that uses an array to produce ripples on the forcefield surface.</p>
<button  type="button" class="foldout_button" onclick="
    this.classList.toggle('active');
    var content = this.nextElementSibling;
    if (content.style.display === 'block') {
      content.style.display = 'none';
      this.innerHTML = '<b>⯈ What is \u003ccode\u003e[unroll]\u003c\/code\u003e ?</b>';
    } else {
      content.style.display = 'block';
      this.innerHTML = '<b>⯆ What is \u003ccode\u003e[unroll]\u003c\/code\u003e ?</b>';

    }
"><b>⯈ What is <code>[unroll]</code> ?</b></button>
<div class="foldout">
<p><code>[unroll]</code> is specified in the above code before the loop, which tells the compiler that we&rsquo;ve written the loop more out of <em>convienience</em> and it shouldn&rsquo;t actually be handled on the gpu as an actual loop. It would be equivalent to writing :</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cs" data-lang="cs"><span style="display:flex;"><span><span style="color:#66d9ef">add</span> += _FloatArray[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">add</span> += _FloatArray[<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">add</span> += _FloatArray[<span style="color:#ae81ff">2</span>];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">add</span> += _FloatArray[<span style="color:#ae81ff">3</span>];
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ... (etc)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">add</span> += _FloatArray[<span style="color:#ae81ff">9</span>];</span></span></code></pre></td></tr></table>
</div>
</div>
<p>Generally unrolling is faster, though you might instead use an actual <code>[loop]</code> if the body is expensive and exiting early may be more performant than the overhead of the loop itself. Perhaps when dealing with raymarching for example.</p>
<p>For more info see <a href="https://discussions.unity.com/t/what-are-unroll-and-loop-when-to-use-them/881945/3">this forum answer</a>.</p>

</div>

<p>It&rsquo;s technically also possible to have other types of arrays, however Unity can only set <strong>Vector</strong> (float4) and <strong>Float</strong> arrays from a C# script.</p>
<p>I also recommend to <strong>always set arrays globally</strong>, using <code>Shader.SetGlobalVectorArray</code> and/or <code>Shader.SetGlobalFloatArray</code> rather than using the <code>material.SetVectorArray / SetFloatArray</code> versions as that can lead to glitchy behaviour due to SRP Batching.</p>
<p>Note that arrays are limited to a maximum array size of <strong>1023</strong>. If you need larger you might need to try alternative solutions instead, e.g. Compute Buffers (StructuredBuffer), though that is more something you&rsquo;d index rather than loop over.</p>
<h4 id="shader-pass-defines">Shader Pass Defines</h4>
<p>In URP, Prior to v10 it was possible to use a <strong>Predefined Boolean Keyword</strong> to switch between using code for different shader passes as a define would be added in each pass. These defines are still available in v10+ but how they were defined was changed which broke the ability to use a Keyword. It is still possible to handle it through a <b class="node">Custom Function</b> node however.</p>
<p>These defines for URP are :</p>
<ul>
<li><code>SHADERPASS_FORWARD</code></li>
<li><code>SHADERPASS_GBUFFER</code></li>
<li><code>SHADERPASS_DEPTHONLY</code></li>
<li><code>SHADERPASS_SHADOWCASTER</code></li>
<li><code>SHADERPASS_META</code></li>
<li><code>SHADERPASS_2D</code></li>
<li><code>SHADERPASS_UNLIT</code></li>
<li><code>SHADERPASS_SPRITELIT</code></li>
<li><code>SHADERPASS_SPRITENORMAL</code></li>
<li><code>SHADERPASS_SPRITEFORWARD</code></li>
<li><code>SHADERPASS_SPRITEUNLIT</code></li>
<li><code>SHADERPASS_DEPTHNORMALSONLY</code></li>
</ul>
<p>For HDRP a similar list can be found <a href="https://github.com/Unity-Technologies/Graphics/blob/master/Packages/com.unity.render-pipelines.high-definition/Runtime/RenderPipeline/ShaderPass/ShaderPass.cs.hlsl">here</a>.</p>
<p>Shader Graph also uses <code>SHADERPASS_PREVIEW</code> for it&rsquo;s previews. Though you can also check for this using :</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#ifdef SHADERGRAPH_PREVIEW
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// Code for previews only
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#else
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// Code for actual shader
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#endif</span></span></span></code></pre></td></tr></table>
</div>
</div>
<p>This can be important for some code that isn&rsquo;t available in the preview stage.</p>
<p>To use one of the pass defines in v10+ to output different values for a specific pass, the following <b class="node">Custom Function</b> could be used :</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#ifdef SHADERGRAPH_PREVIEW
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Out <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">#else
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// For URP this is needed :
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;Packages/com.unity.render-pipelines.universal/Editor/ShaderGraph/Includes/ShaderPass.hlsl&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Test if we are in the SHADOWCASTER pass
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">#if (SHADERPASS == SHADERPASS_SHADOWCASTER)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		Out <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">#else
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		Out <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">#endif
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#endif</span></span></span></code></pre></td></tr></table>
</div>
</div>
<p>Here I&rsquo;m using the <strong>String</strong> mode, but you could also use the <strong>File</strong> mode and the <code>#include</code> could then be moved outside the function too. The <code>ShaderPass.hlsl</code> file is only important for defining values to each of the <code>SHADERPASS</code> defines I listed before. I find it a bit strange that Shader Graph isn&rsquo;t generating the include for this file automatically (in URP v10.2.2 at least). It is using the defines from that file so really should be including it. I would assume this is a bug.</p>
<p>(Thanks to ElliotB who shared their findings on the changes to this in v10+ on the Unity discord &amp; <a href="https://forum.unity.com/threads/shaderpass_shadowcaster-and-testing-for-the-shadowcaster-pass.1033108/">forums</a>).</p>
<p>As for HDRP, they correctly include their <code>ShaderPass.cs.hlsl</code> file. Note that their shadow pass is <code>SHADERPASS_SHADOWS</code> instead.</p>
<p>While I&rsquo;ve used the <code>SHADERPASS_SHADOWCASTER</code> as an example, if you actually wanted to have an object cast shadows without rendering normally, or only remove shadows, you can easily do this by changing the <strong>Cast Shadows</strong> option on the <strong>Mesh Renderer</strong> component, to <strong>Shadows Only</strong> or <strong>Off</strong>. The function here is just an example. The 0 and 1 used as the output could be replaced with two inputs for more control over which values are used, and would allow them to be different per fragment/pixel (e.g. based on <b class="node">Simple Noise</b> or the result of a <b class="node">Sample Texture 2D</b>).</p>
<hr>
<h3 id="generated-shader-code">Viewing/Editing Generated Shader Code</h3>
<p>Behind the scenes, Shader Graph generates shader code specific to the render pipeline you&rsquo;re working in (URP/HDRP). In v10+ it&rsquo;s possible to view this code using the <strong>View Generated Shader</strong> button in Unity&rsquo;s <strong>Inspector</strong> window when the <strong>Shader Graph Asset</strong> is selected in the <strong>Project</strong> window. Prior to v10 you could instead right-click the <b class="node">Master</b> node to find this option.</p>
<div class="img-center">
<a href="ViewGeneratedShader.png" target="_blank" rel="noopener noreferrer">
<img loading="lazy" width="557" height="155" alt="(Image)" src="ViewGeneratedShader.png" />
</a>
<p class="img-text"></p>
</div>
<p>This will generate the code into a temporary file, allowing you to view it.</p>
<p>If you plan to edit the code, you must first save the shader file somewhere in your <strong>Assets</strong> folder. It can then be treated similarly to any other code-written shader (but still requires the Shader Graph package to be installed to function). It is separate from the graph asset now though, so you&rsquo;ll need to switch the shader on materials to use the code version. Changes to the code will also not update the graph, and vice versa.</p>
<p>Sometimes Shader Graph can be a bit limited, so it can be useful to edit the generated code to extend what it is possible in graph form. For example, adding <a href="https://docs.unity3d.com/Manual/SL-Stencil.html">Stencil</a> operations. (It&rsquo;s also possible to override this on the <strong>RenderObjects</strong> feature for the URP Forward Renderer. That is outside of the scope of this tutorial though, it&rsquo;s long enough already!)</p>
<p>Be aware that the code might include multiple SubShaders depending on the targets under the Graph Settings. I&rsquo;ve also seen URP ones convert to two SubShaders, one intended for gles platforms (&amp; using shader model 2) and another for other platforms (using shader model 4.5). If you&rsquo;re editing the code make sure you edit the one being used by your target (or both)
<br><hr>

<div style="display:block;text-align: center">
<h2 class="title-undecorated">Thanks for reading! 😊</h2>
<p style="margin-bottom:0">If you find this post helpful, please consider sharing it with others / on socials<br>Donations are also <b>greatly</b> appreciated! 🙏✨</p>
<p style="font-size:13px;margin-top:0;color:grey">(Keeps this site free from ads and allows me to focus more on tutorials)</p>

</div>

<div class="footer-btns">

<a href="https://ko-fi.com/cyanilux" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
<div class="footer-btn btn-kofi">
<img class="img" src="https://www.cyanilux.com/logo-kofi.png" alt="Ko-fi" style="width:22px; padding-right:5px">
Support me on Ko-fi! ✨
</img>
</div>
</a>

<a href="http://discord.gg/2V93q9w" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
<div class="footer-btn btn-discord">
<img class="img" src="https://www.cyanilux.com/logo-discord-2.png" alt="Discord" style="width:22px; padding-right:5px">
Join my discord! 💬
</img>
</div>
</a>

</div></p>


        <script>
                var h1s = document.querySelectorAll("h2, h3, h4");
                for (let i = 0; i < h1s.length; i++){
                    var id = h1s[i].getAttribute("id");
                    if (id == null || id == "") continue;

                    var e = document.createElement("div");
                    e.textContent = "🔗";
                    e.className = "hLink";
                    e.addEventListener("mousedown", (event) => {
                        var newurl = window.location.protocol + '//' + window.location.host + window.location.pathname;
                        newurl += window.location.search;
                        newurl += "#" + event.target.parentElement.getAttribute("id");
                        window.history.pushState({path:newurl}, '', newurl);
                        navigator.clipboard.writeText(newurl);
                    })

                    h1s[i].appendChild(e);
                }
            </script>
        </div>
        </br>

<p class="footer"><a class="small-text" href="https://twitter.com/Cyanilux">© 2019-2025 Cyanilux</a></p>

<p class="small-text" style="text-align:center;">



	<a href="https://www.cyanilux.com/#license">
	
	License / Usage
	</a>
	 &#8212; 

	<a href="https://www.cyanilux.com/cookies">
	
	Cookies & Privacy
	</a>
	 &#8212; 

	<a href="https://www.cyanilux.com/index.xml">
	
	RSS Feed
	</a>
	

</p>
</br>

<div class="cookie-container">
<p>Hello! This site uses cookies related to Twitter (for showing embedded tweets) &amp; Google Analytics (to provide anonymous stats about which web pages are visited, links clicked, etc). These help with improving the website and letting me know what content is popular. 
See the <a href="https://www.cyanilux.com/cookies">Cookies & Privacy</a> page for more info.</p>
<button class="cookie-accept-btn"><b>Accept</b></button>
<button class="cookie-refuse-btn"><b>Refuse</b></button>
</div>

<script>
	var webStorageSupported = (typeof(Storage) !== undefined);
	
	function setCookie(cname, cvalue, exdays) {
		var d = new Date();
		d.setTime(d.getTime() + (exdays*24*60*60*1000));
		var expires = "expires="+ d.toUTCString();
		document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
	}
	
	const cookieContainer = document.querySelector(".cookie-container");
	const cookieAcceptButton = document.querySelector(".cookie-accept-btn");
	const cookieRefuseButton = document.querySelector(".cookie-refuse-btn");
	
	cookieAcceptButton.addEventListener("click", () => {
		cookieContainer.classList.remove("active");
	
		if (webStorageSupported){
			localStorage.setItem("cookiesAccepted", "true");
		}else{
			
			setCookie("cookiesAccepted", "true", 365);
		}
		
		location.reload();
	});
	
	cookieRefuseButton.addEventListener("click", () => {
		cookieContainer.classList.remove("active");
	
		
		
		document.cookie.split(";").forEach(function(c) { document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); });
		
		if (webStorageSupported){
			localStorage.setItem("cookiesAccepted", "false");
		}else{
			
			setCookie("cookiesAccepted", "false", 14);
		}
	});
	
	setTimeout(() => {
		if (showBanner) {
			cookieContainer.classList.add("active");
		}
	}, 1000);
</script>
    </body>
</html>
